<div class="flex flex-col flex-auto w-full">

    <div class="flex flex-wrap w-full   p-6 md:p-8">

        <!-- Title and action buttons -->
        <div class="flex items-center justify-between w-full">
            <div *ngIf="mainScreen!='sales'">
                <div class="text-3xl font-semibold tracking-tight leading-8">Dashboard</div>
                <div class="font-medium tracking-tight text-secondary">Monitor metrics, check reports and review
                    performance</div>
            </div>
            <div *ngIf="mainScreen == 'sales'">
                <div class="text-3xl font-semibold tracking-tight leading-8">Company Performance</div>
                <div class="font-medium tracking-tight text-secondary">The percentage values below are based on the same
                    range in last year's performance (i.e. YTD, for example, isn't including all of last year's sales,
                    but only comparing sales up until today's date last year).
                </div>
            </div>
            <div class="flex items-center ml-6">
                <mat-button-toggle-group #group="matButtonToggleGroup" [value]="mainScreen"
                    (change)="calledScreen(group.value)">
                    <mat-button-toggle value="sales">Sales Report</mat-button-toggle>
                    <mat-button-toggle value="status">Order Status Report</mat-button-toggle>
                    <mat-button-toggle value="generator">Generators</mat-button-toggle>
                </mat-button-toggle-group>
            </div>
        </div>
        <!-- Sales Report -->
        <div *ngIf="mainScreen == 'sales'" class="w-full">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 w-full mt-8">
                <!-- YTD -->
                <div
                    class="sm:col-span-2 lg:col-span-1 flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden">
                    <div class="flex items-start justify-between m-6 mb-0">
                        <div class="text-lg font-medium tracking-tight leading-6 truncate">YTD</div>
                    </div>
                    <div class="flex flex-col lg:flex-row lg:items-center mx-6 mt-3">
                        <div class="text-7xl font-bold tracking-tighter leading-tight">${{data.conversions.amount |
                            number:'1.0-0'}}</div>
                        <div class="flex lg:flex-col lg:ml-3">
                            <mat-icon class="icon-size-5 text-red-500"
                                [svgIcon]="'heroicons_solid:trending-down'"></mat-icon>
                            <div
                                class="flex items-center ml-1 lg:ml-0 lg:mt-0.5 text-md leading-none whitespace-nowrap text-secondary">
                                <span class="font-medium text-red-500">2%</span>
                                <span class="ml-1">below target</span>
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-col flex-auto h-20">
                        <apx-chart class="flex-auto w-full h-full" [chart]="chartConversions.chart"
                            [colors]="chartConversions.colors" [series]="chartConversions.series"
                            [stroke]="chartConversions.stroke" [tooltip]="chartConversions.tooltip"
                            [xaxis]="chartConversions.xaxis" [yaxis]="chartConversions.yaxis"></apx-chart>
                    </div>
                </div>
                <!-- MTD -->
                <div class="flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden">
                    <div class="flex items-start justify-between m-6 mb-0">
                        <div class="text-lg font-medium tracking-tight leading-6 truncate">MTD</div>
                    </div>
                    <div class="flex flex-col lg:flex-row lg:items-center mx-6 mt-3">
                        <div class="text-7xl font-bold tracking-tighter leading-tight">${{data.impressions.amount |
                            number:'1.0-0'}}</div>
                        <div class="flex lg:flex-col lg:ml-3">
                            <mat-icon class="icon-size-5 text-red-500"
                                [svgIcon]="'heroicons_solid:trending-down'"></mat-icon>
                            <div
                                class="flex items-center ml-1 lg:ml-0 lg:mt-0.5 text-md leading-none whitespace-nowrap text-secondary">
                                <span class="font-medium text-red-500">4%</span>
                                <span class="ml-1">below target</span>
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-col flex-auto h-20">
                        <apx-chart class="flex-auto w-full h-full" [chart]="chartImpressions.chart"
                            [colors]="chartImpressions.colors" [series]="chartImpressions.series"
                            [stroke]="chartImpressions.stroke" [tooltip]="chartImpressions.tooltip"
                            [xaxis]="chartImpressions.xaxis" [yaxis]="chartImpressions.yaxis"></apx-chart>
                    </div>
                </div>
                <!-- WTD -->
                <div class="flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden">
                    <div class="flex items-start justify-between m-6 mb-0">
                        <div class="text-lg font-medium tracking-tight leading-6 truncate">WTD</div>
                    </div>
                    <div class="flex flex-col lg:flex-row lg:items-center mx-6 mt-3">
                        <div class="text-7xl font-bold tracking-tighter leading-tight">${{data.visits.amount |
                            number:'1.0-0'}}</div>
                        <div class="flex lg:flex-col lg:ml-3">
                            <mat-icon class="icon-size-5 text-red-500"
                                [svgIcon]="'heroicons_solid:trending-down'"></mat-icon>
                            <div
                                class="flex items-center ml-1 lg:ml-0 lg:mt-0.5 text-md leading-none whitespace-nowrap text-secondary">
                                <span class="font-medium text-red-500">4%</span>
                                <span class="ml-1">below target</span>
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-col flex-auto h-20">
                        <apx-chart class="flex-auto w-full h-full" [chart]="chartVisits.chart"
                            [colors]="chartVisits.colors" [series]="chartVisits.series" [stroke]="chartVisits.stroke"
                            [tooltip]="chartVisits.tooltip" [xaxis]="chartVisits.xaxis"
                            [yaxis]="chartVisits.yaxis"></apx-chart>
                    </div>
                </div>
            </div>
            <!-- Your Performance -->
            <div class="flex flex-col flex-auto mt-8 bg-card shadow rounded-2xl overflow-hidden">
                <div class="flex items-start justify-between m-6 mb-0">
                    <div class="text-lg font-medium tracking-tight leading-6 truncate">Your Performance</div>
                    <div class="ml-2">
                        <button class="h-6 min-h-6 px-2 rounded-full bg-hover" mat-button
                            [matMenuTriggerFor]="conversionMenu">
                            <span class="font-medium text-sm text-secondary">30 days</span>
                        </button>
                        <mat-menu #conversionMenu="matMenu">
                            <button mat-menu-item>30 days</button>
                            <button mat-menu-item>3 months</button>
                            <button mat-menu-item>9 months</button>
                        </mat-menu>
                    </div>
                </div>
                <div class="flex items-start mt-6 mx-6">
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-8 sm:gap-12">
                        <div class="flex flex-col">
                            <div class="flex items-center">
                                <div class="font-medium text-secondary leading-5">YTD</div>
                                <mat-icon class="ml-1.5 icon-size-4 text-hint"
                                    [svgIcon]="'heroicons_solid:information-circle'"
                                    [matTooltip]="'Score is calculated by using the historical ratio between Page Views and Visitors. Best score is 1000, worst score is 0.'"></mat-icon>
                            </div>
                            <div class="flex items-start mt-2">
                                <div class="text-4xl font-bold tracking-tight leading-none">
                                    {{data.visitorsVsPageViews.overallScore}}</div>
                                <div class="flex items-center ml-2">
                                    <mat-icon class="icon-size-5 text-green-500"
                                        [svgIcon]="'heroicons_solid:arrow-circle-up'"></mat-icon>
                                    <div class="ml-1 text-md font-medium text-green-500">42.9%</div>
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-col">
                            <div class="flex items-center">
                                <div class="font-medium text-secondary leading-5">MTD</div>
                                <mat-icon class="ml-1.5 icon-size-4 text-hint"
                                    [svgIcon]="'heroicons_solid:information-circle'"
                                    [matTooltip]="'Average Ratio is the average ratio between Page Views and Visitors'"></mat-icon>
                            </div>
                            <div class="flex items-start mt-2">
                                <div class="text-4xl font-bold tracking-tight leading-none">
                                    {{data.visitorsVsPageViews.averageRatio | number:'1.0-0'}}%</div>
                                <div class="flex items-center ml-2">
                                    <mat-icon class="icon-size-5 text-red-500"
                                        [svgIcon]="'heroicons_solid:arrow-circle-down'"></mat-icon>
                                    <div class="ml-1 text-md font-medium text-red-500">13.1%</div>
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-col">
                            <div class="flex items-center">
                                <div class="font-medium text-secondary leading-5">WTD</div>
                                <mat-icon class="ml-1.5 icon-size-4 text-hint"
                                    [svgIcon]="'heroicons_solid:information-circle'"
                                    [matTooltip]="'Predicted Ratio is calculated by using historical ratio, current trends and your goal targets.'"></mat-icon>
                            </div>
                            <div class="flex items-start mt-2">
                                <div class="text-4xl font-bold tracking-tight leading-none">
                                    {{data.visitorsVsPageViews.predictedRatio | number:'1.0-0'}}%</div>
                                <div class="flex items-center ml-2">
                                    <mat-icon class="icon-size-5 text-green-500"
                                        [svgIcon]="'heroicons_solid:arrow-circle-up'"></mat-icon>
                                    <div class="ml-1 text-md font-medium text-green-500">22.2%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex flex-col flex-auto min-h-80 m-6">
                    <div class="row">
                        <!-- Year To Date Sales,By Store -->
                        <div class="col-12 col-md-4">
                            <div class="text-lg font-medium tracking-tight leading-6 truncate border-b">Year To Date
                                Sales,
                                By Store ($0.00)</div>
                            <div id="chart">
                                <apx-chart [series]="chartOptions.series" [chart]="chartOptions.chart"
                                    [labels]="chartOptions.labels" [responsive]="chartOptions.responsive"></apx-chart>
                            </div>
                        </div>
                        <div class="col-12 col-md-8">
                            <div class="row">
                                <div class="col-12 col-md-6">
                                    <div class="text-lg font-medium tracking-tight leading-6 truncate border-b">Q1</div>
                                    <fuse-alert class="mt-2" [appearance]="'soft'" [type]="'warning'">
                                        <mat-icon class="icon-size-5" fuseAlertIcon
                                            [svgIcon]="'heroicons_solid:lock-open'">
                                        </mat-icon>
                                        There is no data to show for this quarter.
                                    </fuse-alert>
                                </div>
                                <div class="col-12 col-md-6">
                                    <div class="text-lg font-medium tracking-tight leading-6 truncate border-b">Q2</div>
                                    <fuse-alert class="mt-2" [appearance]="'soft'" [type]="'warning'">
                                        <mat-icon class="icon-size-5" fuseAlertIcon
                                            [svgIcon]="'heroicons_solid:lock-open'">
                                        </mat-icon>
                                        There is no data to show for this quarter.
                                    </fuse-alert>
                                </div>
                                <div class="col-12 col-md-6">
                                    <div class="text-lg font-medium tracking-tight leading-6 truncate border-b">Q3</div>
                                    <fuse-alert class="mt-2" [appearance]="'soft'" [type]="'warning'">
                                        <mat-icon class="icon-size-5" fuseAlertIcon
                                            [svgIcon]="'heroicons_solid:lock-open'">
                                        </mat-icon>
                                        There is no data to show for this quarter.
                                    </fuse-alert>
                                </div>
                                <div class="col-12 col-md-6">
                                    <div class="text-lg font-medium tracking-tight leading-6 truncate border-b">Q4</div>
                                    <fuse-alert class="mt-2" [appearance]="'soft'" [type]="'warning'">
                                        <mat-icon class="icon-size-5" fuseAlertIcon
                                            [svgIcon]="'heroicons_solid:lock-open'">
                                        </mat-icon>
                                        There is no data to show for this quarter.
                                    </fuse-alert>
                                </div>
                            </div>
                        </div>
                        <!-- Year To Date Sales By Quarter, By Store ($0.00) -->
                        <div class="col-12">
                            <div class="text-lg font-medium tracking-tight leading-6 truncate border-b">Year To Date
                                Sales
                                By Quarter, By Store ($0.00)</div>
                            <mat-form-field class="w-full mt-2">
                                <mat-select matInput>
                                    <mat-option value="1">First Quarter</mat-option>
                                    <mat-option value="2">Second Quarter</mat-option>
                                    <mat-option value="3">Third Quarter</mat-option>
                                    <mat-option value="4">Fourth Quarter</mat-option>
                                    <mat-option value="5">YTD</mat-option>
                                </mat-select>
                            </mat-form-field>
                            <fuse-alert class="mt-2" [appearance]="'soft'" [type]="'warning'">
                                <mat-icon class="icon-size-5" fuseAlertIcon [svgIcon]="'heroicons_solid:lock-open'">
                                </mat-icon>
                                There is no YTD data to show for this employee.
                            </fuse-alert>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Portfolio Performance -->
            <div class="flex flex-col flex-auto mt-8 p-6 bg-card shadow rounded-2xl overflow-hidden w-full">
                <div *ngIf="isPerformanceLoader">
                    <ngx-skeleton-loader count="8" appearance="line" animation="pulse" [theme]="{ 
                        'background-color': '#dedede'
                      }">
                    </ngx-skeleton-loader>
                </div>
                <div *ngIf="!isPerformanceLoader">
                    <div class="text-lg font-medium tracking-tight leading-6 truncate">Portfolio Performance</div>
                    <div class="flex flex-col flex-auto mt-2 overflow-x-auto">
                        <table mat-table [dataSource]="programPerformanceData" class="w-full border-t">
                            <!-- Type -->
                            <ng-container matColumnDef="store">
                                <th mat-header-cell *matHeaderCellDef>
                                    Store
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{element.storeName}}
                                </td>
                            </ng-container>

                            <!-- Total -->
                            <ng-container matColumnDef="sales">
                                <th mat-header-cell *matHeaderCellDef>
                                    Sales
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    <span class="font-medium text-right">
                                        {{element.monthlyEarnings | currency}}
                                    </span>
                                </td>
                            </ng-container>

                            <!-- Expenses amount -->
                            <ng-container matColumnDef="py">
                                <th mat-header-cell *matHeaderCellDef>
                                    <div class="flex">
                                        <span>PY</span>
                                        <mat-icon class="icon-size-4 ml-1" matTooltip="Previous year sales"
                                            [svgIcon]="'heroicons_solid:question-mark-circle'"></mat-icon>
                                    </div>
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{element.previousYearSales | currency}}
                                </td>
                            </ng-container>

                            <!-- Expenses percentage -->
                            <ng-container matColumnDef="percent">
                                <th mat-header-cell *matHeaderCellDef>
                                    (%)
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    <div class="flex" *ngIf="element.color == 'red'">
                                        <mat-icon class="icon-size-5 text-red-500"
                                            [svgIcon]="'heroicons_solid:trending-down'"></mat-icon>
                                        <span class="text-red-500">{{element.percent.toFixed(2)}}%</span>
                                    </div>
                                    <div class="flex" *ngIf="element.color == 'green'">
                                        <mat-icon class="icon-size-5 text-green-500"
                                            [svgIcon]="'heroicons_solid:trending-up'"></mat-icon>
                                        <span class="text-green-500">{{element.percent.toFixed(2)}}%</span>
                                    </div>
                                    <div class="flex" *ngIf="element.color == 'gray'">
                                        <span>{{element.percent.toFixed(2)}}%</span>
                                    </div>
                                </td>
                            </ng-container>

                            <!-- Remaining amount -->
                            <ng-container matColumnDef="difference">
                                <th mat-header-cell *matHeaderCellDef>
                                    <div class="flex">
                                        <span>Diff</span>
                                        <mat-icon class="icon-size-4 ml-1" matTooltip="Sales Difference"
                                            [svgIcon]="'heroicons_solid:question-mark-circle'"></mat-icon>
                                    </div>
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    <span *ngIf="element.color == 'green'"
                                        class="text-green-500">{{element.difference.toFixed(2) |
                                        currency}}</span>
                                    <span *ngIf="element.color == 'red'"
                                        class="text-red-500">({{element.difference.toFixed(2) |
                                        currency}})</span>
                                    <span *ngIf="element.color == 'gray'">{{element.difference.toFixed(2) |
                                        currency}}</span>
                                </td>
                            </ng-container>

                            <!-- Remaining percentage -->
                            <ng-container matColumnDef="n_sales">
                                <th mat-header-cell *matHeaderCellDef>
                                    <div class="flex">
                                        <span>NS</span>
                                        <mat-icon class="icon-size-4 ml-1" matTooltip="Number of sales"
                                            [svgIcon]="'heroicons_solid:question-mark-circle'"></mat-icon>
                                    </div>
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{element.NS}}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="pyns">
                                <th mat-header-cell *matHeaderCellDef>
                                    <div class="flex">
                                        <span>PYNS</span>
                                        <mat-icon class="icon-size-4 ml-1" matTooltip="previous year number of sales"
                                            [svgIcon]="'heroicons_solid:question-mark-circle'"></mat-icon>
                                    </div>
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{element.PYNS.toFixed(2)}}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="avg">
                                <th mat-header-cell *matHeaderCellDef>
                                    <div class="flex">
                                        <span>AVG</span>
                                        <mat-icon class="icon-size-4 ml-1" matTooltip="Average sales"
                                            [svgIcon]="'heroicons_solid:question-mark-circle'"></mat-icon>
                                    </div>
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{element.avg.toFixed(2) | currency}}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="margin">
                                <th mat-header-cell *matHeaderCellDef>
                                    Margin
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{element.margin.toFixed(2)}}%
                                </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="programPerformanceColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: programPerformanceColumns;"></tr>
                        </table>
                        <mat-paginator #paginator
                            class="border-b sm:border-t sm:border-b-0 z-10 bg-gray-50 dark:bg-transparent"
                            [length]="totalPerformanceRecords" [pageIndex]="0" [pageSize]="20"
                            (page)="getNextPortfolioData($event)" [hidePageSize]="true">
                        </mat-paginator>

                    </div>
                </div>
            </div>
            <!-- Program Performance -->
            <div class="flex flex-col flex-auto mt-8 p-6 bg-card shadow rounded-2xl overflow-hidden w-full">
                <div class="text-lg font-medium tracking-tight leading-6 truncate">Program Performance</div>
                <div class="mt-2">
                    <img class="w-50" src="https://assets.consolidus.com/globalAssets/Stores/mastheads/145.gif">
                    <div class="row">
                        <div class="col-md-4 col-12">
                            <div class="font-medium text-secondary">YTD</div>
                            <div id="chart1">
                                <apx-chart [series]="chartOptions1.series" [chart]="chartOptions1.chart"
                                    [dataLabels]="chartOptions1.dataLabels" [plotOptions]="chartOptions1.plotOptions"
                                    [yaxis]="chartOptions1.yaxis" [legend]="chartOptions1.legend"
                                    [fill]="chartOptions1.fill" [stroke]="chartOptions1.stroke"
                                    [tooltip]="chartOptions1.tooltip" [xaxis]="chartOptions1.xaxis"></apx-chart>
                            </div>
                        </div>
                        <div class="col-md-4 col-12 ">
                            <div class="flex flex-col flex-auto">
                                <div class="font-medium text-secondary">YTD By Quarter</div>
                                <div class="flex flex-col flex-auto">
                                    <apx-chart [series]="chartOptions2.series" [chart]="chartOptions2.chart"
                                        [dataLabels]="chartOptions2.dataLabels"
                                        [plotOptions]="chartOptions2.plotOptions" [yaxis]="chartOptions2.yaxis"
                                        [legend]="chartOptions2.legend" [fill]="chartOptions2.fill"
                                        [stroke]="chartOptions2.stroke" [tooltip]="chartOptions2.tooltip"
                                        [xaxis]="chartOptions2.xaxis"></apx-chart>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-12 ">
                            <div class="flex flex-col flex-auto">
                                <div class="font-medium text-secondary">Annual Total Sales</div>
                                <div class="flex flex-col flex-auto">
                                    <apx-chart class="flex-auto w-full h-80" [chart]="chartGithubIssues.chart"
                                        [colors]="chartGithubIssues.colors" [dataLabels]="chartGithubIssues.dataLabels"
                                        [grid]="chartGithubIssues.grid" [labels]="chartGithubIssues.labels"
                                        [legend]="chartGithubIssues.legend"
                                        [plotOptions]="chartGithubIssues.plotOptions"
                                        [series]="chartGithubIssues.series['last-week']"
                                        [states]="chartGithubIssues.states" [stroke]="chartGithubIssues.stroke"
                                        [tooltip]="chartGithubIssues.tooltip" [xaxis]="chartGithubIssues.xaxis"
                                        [yaxis]="chartGithubIssues.yaxis"></apx-chart>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Order Status Report -->
        <div *ngIf="mainScreen == 'status'" class="w-full">
            <app-order-status-report></app-order-status-report>
        </div>
        <!-- Generators -->
        <div *ngIf="mainScreen == 'generator'" class="w-full">
            <app-order-generators></app-order-generators>
        </div>
    </div>

</div>