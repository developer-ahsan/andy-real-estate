<div class="flex flex-col flex-auto w-full">

    <div class="flex flex-wrap w-full  p-6 md:p-8">

        <!-- Title and action buttons -->
        <div class="flex items-center justify-between w-full">
            <div>
                <div class="text-3xl font-semibold tracking-tight leading-8">Company Performance</div>
                <div class="font-medium tracking-tight text-secondary">The percentage values below are based on the same
                    range in last year's performance (i.e. YTD, for example, isn't including all of last year's sales,
                    but only comparing sales up until today's date last year).
                </div>
            </div>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 w-full mt-8">
            <!-- YTD -->
            <div class="sm:col-span-2 lg:col-span-1 bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6">
                <div class="flex flex-row">
                    <div
                        class="self-center w-16 h-16 rounded-lg bg-transparent sm:bg-red-100 text-red-500 dark:bg-gray-900 dark:bg-opacity-20 relative text-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="absolute top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2 w-8 h-8 bi bi-hdd-stack"
                            viewBox="0 0 16 16">
                            <path
                                d="M14 10a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h12zM2 9a2 2 0 0 0-2 2v1a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-1a2 2 0 0 0-2-2H2z">
                            </path>
                            <path
                                d="M5 11.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm-2 0a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zM14 3a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h12zM2 2a2 2 0 0 0-2 2v1a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H2z">
                            </path>
                            <path d="M5 4.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm-2 0a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"></path>
                        </svg>
                    </div>
                    <div class="ml-4">
                        <h2 class="text-lg font-medium tracking-tight leading-6 truncate">YTD</h2>
                        <div class="flex flex-col lg:flex-row lg:items-center  mt-2">
                            <div class="text-4xl font-bold tracking-tighter leading-tight">{{ytDDataMain.YTD |
                                currency}}
                            </div>
                            <div class="flex lg:flex-col lg:ml-3">
                                <div *ngIf="ytDDataMain.ytdPercent != 0">
                                    <div class="flex align-items-center" *ngIf="!ytDDataMain.ytdPercentBln">
                                        <mat-icon class="icon-size-5 text-red-500"
                                            [svgIcon]="'heroicons_solid:trending-down'"></mat-icon>
                                        <span class="text-red-500">{{ytDDataMain.ytdPercent}}%</span>
                                    </div>
                                    <div class="flex align-items-center" *ngIf="ytDDataMain.ytdPercentBln">
                                        <mat-icon class="icon-size-5 text-green-500"
                                            [svgIcon]="'heroicons_solid:trending-up'"></mat-icon>
                                        <span class="text-green-500">{{ytDDataMain.ytdPercent}}%</span>
                                    </div>
                                </div>
                                <div class="flex" *ngIf="ytDDataMain.ytdPercent == 0">
                                    <span>{{ytDDataMain.ytdPercent}}%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- MTD -->
            <div class="sm:col-span-2 lg:col-span-1 bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6">
                <div class="flex flex-row">
                    <div
                        class="self-center w-16 h-16 rounded-lg bg-transparent sm:bg-yellow-100 text-yellow-500 dark:bg-gray-900 dark:bg-opacity-20 relative text-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="absolute top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2 w-8 h-8 bi bi-receipt"
                            viewBox="0 0 16 16">
                            <path
                                d="M1.92.506a.5.5 0 0 1 .434.14L3 1.293l.646-.647a.5.5 0 0 1 .708 0L5 1.293l.646-.647a.5.5 0 0 1 .708 0L7 1.293l.646-.647a.5.5 0 0 1 .708 0L9 1.293l.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .801.13l.5 1A.5.5 0 0 1 15 2v12a.5.5 0 0 1-.053.224l-.5 1a.5.5 0 0 1-.8.13L13 14.707l-.646.647a.5.5 0 0 1-.708 0L11 14.707l-.646.647a.5.5 0 0 1-.708 0L9 14.707l-.646.647a.5.5 0 0 1-.708 0L7 14.707l-.646.647a.5.5 0 0 1-.708 0L5 14.707l-.646.647a.5.5 0 0 1-.708 0L3 14.707l-.646.647a.5.5 0 0 1-.801-.13l-.5-1A.5.5 0 0 1 1 14V2a.5.5 0 0 1 .053-.224l.5-1a.5.5 0 0 1 .367-.27zm.217 1.338L2 2.118v11.764l.137.274.51-.51a.5.5 0 0 1 .707 0l.646.647.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.509.509.137-.274V2.118l-.137-.274-.51.51a.5.5 0 0 1-.707 0L12 1.707l-.646.647a.5.5 0 0 1-.708 0L10 1.707l-.646.647a.5.5 0 0 1-.708 0L8 1.707l-.646.647a.5.5 0 0 1-.708 0L6 1.707l-.646.647a.5.5 0 0 1-.708 0L4 1.707l-.646.647a.5.5 0 0 1-.708 0l-.509-.51z">
                            </path>
                            <path
                                d="M3 4.5a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm8-6a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5z">
                            </path>
                        </svg>
                    </div>
                    <div class="ml-4">
                        <h2 class="text-lg font-medium tracking-tight leading-6 truncate">MTD</h2>
                        <div class="flex flex-col lg:flex-row lg:items-center  mt-2">
                            <div class="text-4xl font-bold tracking-tighter leading-tight">{{ytDDataMain.MTD |
                                currency}}
                            </div>
                            <div class="flex lg:flex-col lg:ml-3">
                                <div *ngIf="ytDDataMain.mtdPercent != 0">
                                    <div class="flex align-items-center" *ngIf="!ytDDataMain.mtdPercentBln">
                                        <mat-icon class="icon-size-5 text-red-500"
                                            [svgIcon]="'heroicons_solid:trending-down'"></mat-icon>
                                        <span class="text-red-500">{{ytDDataMain.mtdPercent}}%</span>
                                    </div>
                                    <div class="flex align-items-center" *ngIf="ytDDataMain.mtdPercentBln">
                                        <mat-icon class="icon-size-5 text-green-500"
                                            [svgIcon]="'heroicons_solid:trending-up'"></mat-icon>
                                        <span class="text-green-500">{{ytDDataMain.mtdPercent}}%</span>
                                    </div>
                                </div>
                                <div class="flex" *ngIf="ytDDataMain.mtdPercent == 0">
                                    <span>{{ytDDataMain.mtdPercent}}%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- WTD -->
            <div class="sm:col-span-2 lg:col-span-1 bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6">
                <div class="flex flex-row">
                    <div
                        class="self-center w-16 h-16 rounded-lg bg-transparent sm:bg-green-100 text-green-500 dark:bg-gray-900 dark:bg-opacity-20 relative text-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="absolute top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2 w-8 h-8 bi bi-life-preserver"
                            viewBox="0 0 16 16">
                            <path
                                d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm6.43-5.228a7.025 7.025 0 0 1-3.658 3.658l-1.115-2.788a4.015 4.015 0 0 0 1.985-1.985l2.788 1.115zM5.228 14.43a7.025 7.025 0 0 1-3.658-3.658l2.788-1.115a4.015 4.015 0 0 0 1.985 1.985L5.228 14.43zm9.202-9.202-2.788 1.115a4.015 4.015 0 0 0-1.985-1.985l1.115-2.788a7.025 7.025 0 0 1 3.658 3.658zm-8.087-.87a4.015 4.015 0 0 0-1.985 1.985L1.57 5.228A7.025 7.025 0 0 1 5.228 1.57l1.115 2.788zM8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6z">
                            </path>
                        </svg>
                    </div>
                    <div class="ml-4">
                        <h2 class="text-lg font-medium tracking-tight leading-6 truncate">WTD</h2>
                        <div class="flex flex-col lg:flex-row lg:items-center  mt-2">
                            <div class="text-4xl font-bold tracking-tighter leading-tight">{{ytDDataMain.WTD |
                                currency}}
                            </div>
                            <div class="flex lg:flex-col lg:ml-3">
                                <div *ngIf="ytDDataMain.wtdPercent != 0">
                                    <div class="flex align-items-center" *ngIf="!ytDDataMain.wtdPercentBln">
                                        <mat-icon class="icon-size-5 text-red-500"
                                            [svgIcon]="'heroicons_solid:trending-down'"></mat-icon>
                                        <span class="text-red-500">{{ytDDataMain.wtdPercent}}%</span>
                                    </div>
                                    <div class="flex align-items-center" *ngIf="ytDDataMain.wtdPercentBln">
                                        <mat-icon class="icon-size-5 text-green-500"
                                            [svgIcon]="'heroicons_solid:trending-up'"></mat-icon>
                                        <span class="text-green-500">{{ytDDataMain.wtdPercent}}%</span>
                                    </div>
                                </div>
                                <div class="flex" *ngIf="ytDDataMain.wtdPercent == 0">
                                    <span>{{ytDDataMain.wtdPercent}}%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Employee Performance -->
        <div class="flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden mt-8">
            <div class="w-full">
                <div class="text-lg font-medium tracking-tight leading-6 truncate">Employee Performance</div>
                <div class="w-full my-2" *ngIf="employeeListLoader">
                    <ngx-skeleton-loader count="8" appearance="line" animation="pulse" [theme]="{ 
                        'background-color': '#dedede'
                      }">
                    </ngx-skeleton-loader>
                </div>
                <div class="flex flex-col flex-auto mt-2 overflow-x-auto" *ngIf="!employeeListLoader">
                    <table class="table table-striped">
                        <thead>
                            <th colspan="2">Employee</th>
                            <th colspan="2">Total Sales</th>
                            <th colspan="2">Number of Sales</th>
                            <th colspan="2">Average Salse</th>
                            <th>
                                <div class="flex">
                                    <span>SCR</span>
                                    <mat-icon class="icon-size-4 ml-1" matTooltip="Sample Conversion Rate"
                                        [svgIcon]="'heroicons_solid:question-mark-circle'"></mat-icon>
                                </div>
                            </th>
                            <th>Action</th>
                        </thead>
                        <tbody>
                            <ng-container *ngFor="let employee of employeePerformanceData;">
                                <tr>
                                    <td colspan="2" class="font-bold">{{employee.EMPLOYEE}}</td>
                                    <td colspan="2">{{employee.TOTAL_SALES | currency}}</td>
                                    <td colspan="2">{{employee.NUM_SALES}}</td>
                                    <td colspan="2">{{employee.AVG | currency}}</td>
                                    <td>{{employee.qryConverted}}/{{employee.qryQuarterSamples}}
                                        ({{((employee.qryConverted/employee.qryQuarterSamples)* 100) | number:
                                        '1.2-2'}}%)
                                    </td>
                                    <td>
                                        <button class="min-w-10 min-h-7 h-7 px-2 leading-6" mat-stroked-button
                                            (click)="openedAccordion(employee)">
                                            <mat-icon class="icon-size-5"
                                                [svgIcon]="employeeName == employee.EMPLOYEE ? 'heroicons_solid:chevron-up' : 'heroicons_solid:chevron-down'">
                                            </mat-icon>
                                        </button>
                                    </td>
                                </tr>
                                <ng-container *ngIf="employee.storeLoader">
                                    <tr>
                                        <td colspan="10">
                                            <ngx-skeleton-loader count="8" appearance="line" animation="pulse" [theme]="{ 
                                                'background-color': '#dedede'
                                              }">
                                            </ngx-skeleton-loader>
                                        </td>
                                    </tr>
                                </ng-container>
                                <ng-container *ngIf="employeeName == employee.EMPLOYEE && !employee.storeLoader">
                                    <tr>
                                        <th>Store</th>
                                        <th>Sales</th>
                                        <th>
                                            <div class="flex">
                                                <span>PY</span>
                                                <mat-icon class="icon-size-4 ml-1" matTooltip="Previous Year Sales"
                                                    [svgIcon]="'heroicons_solid:question-mark-circle'"></mat-icon>
                                            </div>
                                        </th>
                                        <th>%</th>
                                        <th>
                                            <div class="flex">
                                                <span>Diff</span>
                                                <mat-icon class="icon-size-4 ml-1" matTooltip="Sales Difference"
                                                    [svgIcon]="'heroicons_solid:question-mark-circle'"></mat-icon>
                                            </div>
                                        </th>
                                        <th>
                                            <div class="flex">
                                                <span>NS</span>
                                                <mat-icon class="icon-size-4 ml-1" matTooltip="Number of sales"
                                                    [svgIcon]="'heroicons_solid:question-mark-circle'"></mat-icon>
                                            </div>
                                        </th>
                                        <th>
                                            <div class="flex">
                                                <span>PYNS</span>
                                                <mat-icon class="icon-size-4 ml-1"
                                                    matTooltip="Previous year number of sales"
                                                    [svgIcon]="'heroicons_solid:question-mark-circle'"></mat-icon>
                                            </div>
                                        </th>
                                        <th>
                                            <div class="flex">
                                                <span>Diff</span>
                                                <mat-icon class="icon-size-4 ml-1"
                                                    matTooltip="Number of sales difference"
                                                    [svgIcon]="'heroicons_solid:question-mark-circle'"></mat-icon>
                                            </div>
                                        </th>
                                        <th>
                                            <div class="flex">
                                                <span>AVG</span>
                                                <mat-icon class="icon-size-4 ml-1" matTooltip="Average Sale"
                                                    [svgIcon]="'heroicons_solid:question-mark-circle'"></mat-icon>
                                            </div>
                                        </th>
                                        <th>Magin</th>
                                    </tr>
                                    <tr *ngFor="let store of employee.storesData">
                                        <td>{{store.storeName}}</td>
                                        <td>{{store.SALES | currency}}</td>
                                        <td>{{store.PY | currency}}</td>
                                        <td>
                                            <div *ngIf="store.percent != 0">
                                                <div class="flex align-items-center" *ngIf="!store.blnPercent">
                                                    <mat-icon class="icon-size-5 text-red-500"
                                                        [svgIcon]="'heroicons_solid:trending-down'"></mat-icon>
                                                    <span class="text-red-500">{{store.percent}}%</span>
                                                </div>
                                                <div class="flex align-items-center" *ngIf="store.blnPercent">
                                                    <mat-icon class="icon-size-5 text-green-500"
                                                        [svgIcon]="'heroicons_solid:trending-up'"></mat-icon>
                                                    <span class="text-green-500">{{store.percent}}%</span>
                                                </div>
                                            </div>
                                            <div class="flex" *ngIf="store.percent == 0">
                                                <span>{{store.percent}}%</span>
                                            </div>
                                        </td>
                                        <td>
                                            <span *ngIf="store?.DIFF >= 0" class="text-green-500">
                                                {{store?.DIFF | currency}}
                                            </span>
                                            <span *ngIf="store?.DIFF < 0" class="text-red-500">
                                                ({{(store?.DIFF * - 1) | currency}})
                                            </span>
                                        </td>
                                        <td>{{store.NS}}</td>
                                        <td>{{store.PYNS}}</td>
                                        <td>{{store.NS_DIFF}}</td>
                                        <td>{{store.AVG | currency}}</td>
                                        <td>{{store.MARGIN}} %</td>
                                    </tr>
                                </ng-container>
                            </ng-container>

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <!-- Program Performance -->
        <div class="w-full p-6 bg-card shadow rounded-2xl overflow-hidden mt-8" *ngIf="programPerformanceData">
            <div class="flex">
                <div class="text-lg font-medium tracking-tight leading-6 truncate mr-2">Program Performance</div>
            </div>
            <!-- Loader -->
            <div class="my-2" *ngIf="isPerformanceLoader">
                <ngx-skeleton-loader count="8" appearance="line" animation="pulse" [theme]="{ 
                    'background-color': '#dedede'
                  }">
                </ngx-skeleton-loader>
            </div>
            <div class="w-full mt-2 overflow-x-auto" *ngIf="!isPerformanceLoader">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Store</th>
                            <th>Sales</th>
                            <th>
                                <div class="flex">
                                    <span>PY</span>
                                    <mat-icon class="icon-size-4 ml-1" matTooltip="Previous year sales"
                                        [svgIcon]="'heroicons_solid:question-mark-circle'"></mat-icon>
                                </div>
                            </th>
                            <th>(%)</th>
                            <th>
                                <div class="flex">
                                    <span>Diff</span>
                                    <mat-icon class="icon-size-4 ml-1" matTooltip="Sales Difference"
                                        [svgIcon]="'heroicons_solid:question-mark-circle'"></mat-icon>
                                </div>
                            </th>
                            <th>
                                <div class="flex">
                                    <span>NS</span>
                                    <mat-icon class="icon-size-4 ml-1" matTooltip="Number of sales"
                                        [svgIcon]="'heroicons_solid:question-mark-circle'"></mat-icon>
                                </div>
                            </th>
                            <th>
                                <div class="flex">
                                    <span>PYNS</span>
                                    <mat-icon class="icon-size-4 ml-1" matTooltip="previous year number of sales"
                                        [svgIcon]="'heroicons_solid:question-mark-circle'"></mat-icon>
                                </div>
                            </th>
                            <th>
                                <div class="flex">
                                    <span>AVG</span>
                                    <mat-icon class="icon-size-4 ml-1" matTooltip="Average sales"
                                        [svgIcon]="'heroicons_solid:question-mark-circle'"></mat-icon>
                                </div>
                            </th>
                            <th>Margin</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let store of programPerformanceData">
                            <td>
                                <a [routerLink]="['/apps/stores',store.storeID]" target="_blank">{{store.storeName}}</a>
                            </td>
                            <td>{{store.SALES | currency}}</td>
                            <td>{{store.PY | currency}}</td>
                            <td>
                                <div *ngIf="store.percent != 0">
                                    <div class="flex align-items-center" *ngIf="!store.blnPercent">
                                        <mat-icon class="icon-size-5 text-red-500"
                                            [svgIcon]="'heroicons_solid:trending-down'"></mat-icon>
                                        <span class="text-red-500">{{store.percent}}%</span>
                                    </div>
                                    <div class="flex align-items-center" *ngIf="store.blnPercent">
                                        <mat-icon class="icon-size-5 text-green-500"
                                            [svgIcon]="'heroicons_solid:trending-up'"></mat-icon>
                                        <span class="text-green-500">{{store.percent}}%</span>
                                    </div>
                                </div>
                                <div class="flex" *ngIf="store.percent == 0">
                                    <span>{{store.percent}}%</span>
                                </div>
                            </td>
                            <td>
                                <span *ngIf="store?.DIFF >= 0" class="text-green-500">
                                    {{store?.DIFF | currency}}
                                </span>
                                <span *ngIf="store?.DIFF < 0" class="text-red-500">
                                    ({{(store?.DIFF * - 1) | currency}})
                                </span>
                            </td>
                            <td>{{store.NS}}</td>
                            <td>{{store.PYNS}}</td>
                            <td>{{store.AVG | currency}}</td>
                            <td>{{store.MARGIN}} %</td>
                        </tr>
                        <tr>
                            <th>Grand Total</th>
                            <th>{{totalProgramPerformanceData?.SALES | currency}}</th>
                            <th>{{totalProgramPerformanceData?.PY | currency}}</th>
                            <th>
                                <div *ngIf="totalProgramPerformanceData.PERCENT != 0">
                                    <div class="flex align-items-center"
                                        *ngIf="!totalProgramPerformanceData.blnPercent">
                                        <mat-icon class="icon-size-5 text-red-500"
                                            [svgIcon]="'heroicons_solid:trending-down'"></mat-icon>
                                        <span class="text-red-500">{{totalProgramPerformanceData.PERCENT}}%</span>
                                    </div>
                                    <div class="flex align-items-center" *ngIf="totalProgramPerformanceData.blnPercent">
                                        <mat-icon class="icon-size-5 text-green-500"
                                            [svgIcon]="'heroicons_solid:trending-up'"></mat-icon>
                                        <span class="text-green-500">{{totalProgramPerformanceData.PERCENT}}%</span>
                                    </div>
                                </div>
                                <div class="flex" *ngIf="totalProgramPerformanceData.PERCENT == 0">
                                    <span>{{totalProgramPerformanceData.PERCENT}}%</span>
                                </div>
                            </th>
                            <th>
                                <span *ngIf="totalProgramPerformanceData?.DIFF >= 0" class="text-green-500">
                                    {{totalProgramPerformanceData?.DIFF | currency}}
                                </span>
                                <span *ngIf="totalProgramPerformanceData?.DIFF < 0" class="text-red-500">
                                    ({{(totalProgramPerformanceData?.DIFF * - 1) | currency}})
                                </span>
                            </th>
                            <th>{{totalProgramPerformanceData?.NS}}</th>
                            <th>{{totalProgramPerformanceData?.PYNS}}</th>
                            <th>{{(totalProgramPerformanceData?.AVG) | currency}} (AVG)</th>
                            <th>{{totalProgramPerformanceData?.MARGIN}}%</th>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</div>