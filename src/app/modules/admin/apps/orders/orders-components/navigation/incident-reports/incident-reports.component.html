<div class="row w-full justify-content-end px-5 mt-5" *ngIf="!isView && !isViewCreateIncidentReportForm">
    <button mat-stroked-button [matTooltip]="'Create an incident report'" (click)="viewCreateIncidentReportForm()">
        <mat-icon class="icon-size-5 text-current" [svgIcon]="'heroicons_solid:plus'"></mat-icon>
        <span class="ml-2"> Create Incident Report </span>
    </button>
</div>
<div class="row">
    <div class="col-12 p-6 mt-2" *ngIf="!isView && !isViewCreateIncidentReportForm">
        <mat-card class="p-0 h-100 overflow-auto shadow-lg rounded-2xl">
            <mat-card-content>
                <table mat-table [dataSource]="transactions" class="w-full"
                    *ngIf="transactions.length > 0; else noReports">

                    <!-- ID Column -->
                    <ng-container matColumnDef="id">
                        <th mat-header-cell *matHeaderCellDef class="min-w-24"> Id </th>
                        <td mat-cell *matCellDef="let transaction" (click)="viewIncidentReport()"
                            style="cursor: pointer;">
                            {{transaction.id}}
                        </td>
                    </ng-container>

                    <!-- ID Column -->
                    <ng-container matColumnDef="created">
                        <th mat-header-cell *matHeaderCellDef class="min-w-24"> Created </th>
                        <td mat-cell *matCellDef="let transaction" (click)="viewIncidentReport()"
                            style="cursor: pointer;">
                            {{transaction.created}}
                        </td>
                    </ng-container>

                    <!-- ID Column -->
                    <ng-container matColumnDef="created_by">
                        <th mat-header-cell *matHeaderCellDef class="min-w-24"> Created By </th>
                        <td mat-cell *matCellDef="let transaction" (click)="viewIncidentReport()"
                            style="cursor: pointer;">
                            {{transaction.created_by}}
                        </td>
                    </ng-container>

                    <!-- ID Column -->
                    <ng-container matColumnDef="store">
                        <th mat-header-cell *matHeaderCellDef class="min-w-50 w-50"> Store </th>
                        <td mat-cell *matCellDef="let transaction" (click)="viewIncidentReport()"
                            style="cursor: pointer;">
                            {{transaction.store}}
                        </td>
                    </ng-container>

                    <!-- ID Column -->
                    <ng-container matColumnDef="source">
                        <th mat-header-cell *matHeaderCellDef class="min-w-24"> Source </th>
                        <td mat-cell *matCellDef="let transaction" (click)="viewIncidentReport()"
                            style="cursor: pointer;">
                            {{transaction.source}}
                        </td>
                    </ng-container>

                    <!-- ID Column -->
                    <ng-container matColumnDef="source_entities">
                        <th mat-header-cell *matHeaderCellDef class="min-w-50 w-50"> Source Entities </th>
                        <td mat-cell *matCellDef="let transaction" (click)="viewIncidentReport()"
                            style="cursor: pointer;">
                            {{transaction.source_entities}}
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns" class="h-18 bg-light"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"
                        class="h-12 hover:bg-gray-100 dark:hover:bg-hover"></tr>
                </table>
            </mat-card-content>
        </mat-card>
    </div>
    <div class="col-12 mt-2" *ngIf="isView" style="height: 100vh;">
        <!-- Header -->
        <div
            class="relative bg-light flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between md:px-8 border-b pb-2">

            <!-- Title -->
            <div class="text-1xl font-semibold">View Order # 56165</div>
            <!-- Actions -->
            <div class="flex flex-shrink-0 items-center mt-4 sm:mt-0 sm:ml-4">
                <!-- Back to Incident Reports page button -->
                <button [matTooltip]="'Go to Incident reports list'" class="ml-4" mat-stroked-button [color]="'primary'"
                    (click)="viewIncidentReport()">
                    <mat-icon [svgIcon]="'heroicons_outline:arrow-narrow-left'"></mat-icon>
                    <span class="ml-2 mr-1">Back to Incident Reports</span>
                </button>
            </div>
        </div>
        <div class="row w-full px-5 mt-5">
            <mat-card class="w-full px-5 py-5 h-auto overflow-auto">
                <mat-card-content>
                    <div class="row border-b font-bold">
                        <div class="col-6 text-left text-lg">
                            Update Incident Report
                        </div>
                        <div class="col-6 text-right text-secondary">
                            Order # 56160
                        </div>
                    </div>
                    <div class="row py-2">
                        <div class="col-lg-6 col-md-6 col-12">
                            <span class="font-semibold">Date</span>
                            <span class="float-right">01/19/2022</span>
                        </div>
                        <div class="col-lg-6 col-md-6 col-12">
                            <span class="font-semibold">Customer</span>
                            <span class="float-right">Vickie Slone from Wright State University</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-12">
                            <span class="font-semibold">Program/Market</span>
                            <span class="float-right">WrightStatePromos.com</span>
                        </div>
                        <div class="col-lg-6 col-md-6 col-12">
                            <span class="font-semibold">Supplier(s) On Order</span>
                            <span class="float-right">Showdown Displays</span>
                        </div>
                    </div>
                    <div class="row py-3 border-b"></div>
                    <div class="row pt-2 font-semibold">
                        <div class="col-12">
                            Incident Priority:
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-12">
                            <small class="text-secondary font-semibold">Was customer service
                                compromised/effected?</small>
                            <mat-form-field class="w-full">
                                <mat-select [(ngModel)]="selectedorder" name="order">
                                    <mat-option value="select_order" disabled>
                                        Click to select
                                    </mat-option>
                                    <mat-option (click)="orderSelection(order)" *ngFor="let order of orders"
                                        [value]="order">
                                        {{order}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div class="col-lg-6 col-md-6 col-12">
                            <small class="text-secondary font-semibold">Did we lose money on this order
                                in order to correct it?</small>
                            <mat-form-field class="w-full h-12">
                                <mat-select [(ngModel)]="selectedorder" name="order">
                                    <mat-option value="select_order" disabled>
                                        Click to select
                                    </mat-option>
                                    <mat-option (click)="orderSelection(order)" *ngFor="let order of orders"
                                        [value]="order">
                                        {{order}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row pt-2 font-semibold">
                        <div class="col-12">
                            Source of Incident:
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-4 col-md-6 col-6">
                            <mat-checkbox>Program Manager / Service Rep</mat-checkbox>
                        </div>
                        <div class="col-lg-4 col-md-6 col-6">
                            <mat-checkbox>Customer</mat-checkbox>
                        </div>
                        <div class="col-lg-4 col-md-6 col-6">
                            <mat-checkbox>Support</mat-checkbox>
                        </div>
                        <div class="col-lg-4 col-md-6 col-6">
                            <mat-checkbox>Supplier</mat-checkbox>
                        </div>
                        <div class="col-lg-4 col-md-6 col-6">
                            <mat-checkbox>TBD</mat-checkbox>
                        </div>
                        <div class="col-lg-4 col-md-6 col-6">
                            <mat-checkbox>No true fault</mat-checkbox>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <span class="font-semibold">Money lost:</span>
                            <mat-form-field appearance="outline" class="w-full">
                                <input matInput>
                                <mat-icon matSuffix svgIcon="heroicons_outline:currency-dollar"></mat-icon>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <p class="font-semibold">Corrected to satisfaction of customer?</p>
                            <mat-form-field class="w-full h-12">
                                <mat-select [(ngModel)]="selectedorder" name="order">
                                    <mat-option value="select_order" disabled>
                                        Click to select
                                    </mat-option>
                                    <mat-option (click)="orderSelection(order)" *ngFor="let order of orders"
                                        [value]="order">
                                        {{order}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row pt-2">
                        <div class="col-lg-6 col-md-6 col-12">
                            <p class="font-semibold"> Explanation </p>
                            <mat-form-field class="w-full">
                                <textarea matInput rows="5"></textarea>
                            </mat-form-field>
                        </div>
                        <div class="col-lg-6 col-md-6 col-12">
                            <p class="font-semibold"> How? </p>
                            <mat-form-field class="w-full">
                                <textarea matInput rows="5"></textarea>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row pt-2">
                        <div class="col-12">
                            <p class="font-semibold"> Corrected to satisfaction of customer? </p>
                            <mat-form-field class="w-full">
                                <textarea matInput rows="5"></textarea>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row py-3 border-b"></div>
                    <div class="row py-2 px-5 float-right">
                        <mat-progress-spinner *ngIf="isButtonLoader" [diameter]="24" [mode]="'indeterminate'"
                            class="mr-2 mt-2"></mat-progress-spinner>
                        <button [disabled]="isButtonLoader" class="min-w-50" mat-stroked-button
                            [matTooltip]="'Update Incident Report'" (click)="createIncidentReport()">
                            <mat-icon svgIcon="mat_outline:edit"></mat-icon>
                            <span class="ml-2"> Update Report </span>
                        </button>
                    </div>
                </mat-card-content>
            </mat-card>
        </div>
    </div>
    <ng-template #noReports>
        <div class="p-8 sm:p-16 text-2xl font-semibold not-found-color bg-light">
            <img src="assets/gifs/not-found.gif" class="rounded-circle" style="width: 250px;">
            No Incident Reports found!
        </div>
    </ng-template>
</div>

<div *ngIf="isViewCreateIncidentReportForm">
    <div class="row w-full justify-content-end px-5">
        <button [matTooltip]="'Go to Incident reports list'" class="ml-4" mat-stroked-button [color]="'primary'"
            (click)="viewCreateIncidentReportForm()">
            <mat-icon [svgIcon]="'heroicons_outline:arrow-narrow-left'"></mat-icon>
            <span class="ml-2 mr-1">Back to Incident Reports</span>
        </button>
    </div>
    <div class="row w-full px-5 mt-5">
        <mat-card class="w-full px-5 py-5 h-auto overflow-auto">
            <mat-card-content>
                <div class="row border-b font-bold">
                    <div class="col-6 text-left text-lg">
                        Create Incident Report
                    </div>
                    <div class="col-6 text-right text-secondary">
                        Order # 56160
                    </div>
                </div>
                <div class="row py-2">
                    <div class="col-lg-6 col-md-6 col-12">
                        <span class="font-semibold">Date</span>
                        <span class="float-right">01/19/2022</span>
                    </div>
                    <div class="col-lg-6 col-md-6 col-12">
                        <span class="font-semibold">Customer</span>
                        <span class="float-right">Vickie Slone from Wright State University</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-6 col-md-6 col-12">
                        <span class="font-semibold">Program/Market</span>
                        <span class="float-right">WrightStatePromos.com</span>
                    </div>
                    <div class="col-lg-6 col-md-6 col-12">
                        <span class="font-semibold">Supplier(s) On Order</span>
                        <span class="float-right">Showdown Displays</span>
                    </div>
                </div>
                <div class="row py-3 border-b"></div>
                <div class="row pt-2 font-semibold">
                    <div class="col-12">
                        Incident Priority:
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-6 col-md-6 col-12">
                        <small class="text-secondary font-semibold">Was customer service
                            compromised/effected?</small>
                        <mat-form-field class="w-full">
                            <mat-select [(ngModel)]="selectedorder" name="order">
                                <mat-option value="select_order" disabled>
                                    Click to select
                                </mat-option>
                                <mat-option (click)="orderSelection(order)" *ngFor="let order of orders"
                                    [value]="order">
                                    {{order}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="col-lg-6 col-md-6 col-12">
                        <small class="text-secondary font-semibold">Did we lose money on this order
                            in order to correct it?</small>
                        <mat-form-field class="w-full h-12">
                            <mat-select [(ngModel)]="selectedorder" name="order">
                                <mat-option value="select_order" disabled>
                                    Click to select
                                </mat-option>
                                <mat-option (click)="orderSelection(order)" *ngFor="let order of orders"
                                    [value]="order">
                                    {{order}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div>
                <div class="row pt-2 font-semibold">
                    <div class="col-12">
                        Source of Incident:
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-4 col-md-6 col-6">
                        <mat-checkbox>Program Manager / Service Rep</mat-checkbox>
                    </div>
                    <div class="col-lg-4 col-md-6 col-6">
                        <mat-checkbox>Customer</mat-checkbox>
                    </div>
                    <div class="col-lg-4 col-md-6 col-6">
                        <mat-checkbox>Support</mat-checkbox>
                    </div>
                    <div class="col-lg-4 col-md-6 col-6">
                        <mat-checkbox>Supplier</mat-checkbox>
                    </div>
                    <div class="col-lg-4 col-md-6 col-6">
                        <mat-checkbox>TBD</mat-checkbox>
                    </div>
                    <div class="col-lg-4 col-md-6 col-6">
                        <mat-checkbox>No true fault</mat-checkbox>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <span class="font-semibold">Money lost:</span>
                        <mat-form-field appearance="outline" class="w-full">
                            <input matInput>
                            <mat-icon matSuffix svgIcon="heroicons_outline:currency-dollar"></mat-icon>
                        </mat-form-field>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <p class="font-semibold">Corrected to satisfaction of customer?</p>
                        <mat-form-field class="w-full h-12">
                            <mat-select [(ngModel)]="selectedorder" name="order">
                                <mat-option value="select_order" disabled>
                                    Click to select
                                </mat-option>
                                <mat-option (click)="orderSelection(order)" *ngFor="let order of orders"
                                    [value]="order">
                                    {{order}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div>
                <div class="row pt-2">
                    <div class="col-lg-6 col-md-6 col-12">
                        <p class="font-semibold"> Explanation </p>
                        <mat-form-field class="w-full">
                            <textarea matInput rows="5"></textarea>
                        </mat-form-field>
                    </div>
                    <div class="col-lg-6 col-md-6 col-12">
                        <p class="font-semibold"> How? </p>
                        <mat-form-field class="w-full">
                            <textarea matInput rows="5"></textarea>
                        </mat-form-field>
                    </div>
                </div>
                <div class="row pt-2">
                    <div class="col-12">
                        <p class="font-semibold"> Corrected to satisfaction of customer? </p>
                        <mat-form-field class="w-full">
                            <textarea matInput rows="5"></textarea>
                        </mat-form-field>
                    </div>
                </div>
                <div class="row py-3 border-b"></div>
                <div class="row py-2 px-5 float-right">
                    <mat-progress-spinner *ngIf="isButtonLoader" [diameter]="24" [mode]="'indeterminate'"
                        class="mr-2 mt-2"></mat-progress-spinner>
                    <button [disabled]="isButtonLoader" class="min-w-50" mat-stroked-button
                        [matTooltip]="'Submit Incident Report'" (click)="createIncidentReport()">
                        <mat-icon svgIcon="heroicons_solid:check"></mat-icon>
                        <span class="ml-2"> Submit Report </span>
                    </button>
                </div>
            </mat-card-content>
        </mat-card>
    </div>
</div>