<div class="row" *ngIf="!isLoading" cdkScrollable>
    <div class="col-12 my-2">
        <fuse-card class="rounded-2xl shadow bg-card flex flex-col lg:flex-row w-full">
            <div class="p-6 sm:p-8 lg:p-10 w-full">
                <div class="text-2xl font-bold ">
                    Cost Analysis
                </div>
                <div class="row mt-1 w-full">
                    <div class="col-12 mb-3">
                        <button class="float-right mr-3" mat-stroked-button [matTooltip]="'Save report as PDF'"
                            (click)="exportHtmlToPDF()">
                            <mat-icon svgIcon="mat_outline:picture_as_pdf"></mat-icon>
                            <span class="ml-2 mr-1">PDF</span>
                        </button>
                    </div>
                    <div class="col-12 text-center print:overflow-visible" cdkScrollable>
                        <div class="inline-block  text-left print:p-0 w-full" id="htmltable" #htmltable>

                            <!-- Invoice -->
                            <div
                                class="print:w-auto print:p-0 print:rounded-none print:shadow-none print:bg-transparent">

                                <div class="flex items-start">
                                    <div class="grid grid-rows-1 mt-2">
                                        <div class="grid auto-cols-max grid-flow-col gap-x-2">
                                            <div class="w-100 text-left text-2xl text-secondary">
                                                Confidential Cost Analysis Report
                                            </div>
                                        </div>
                                    </div>
                                    <div class="grid grid-cols-2 gap-x-4 gap-y-1 ml-auto ">
                                        <div class="justify-self-start font-semibold text-3xl tracking-tight">Order
                                        </div>
                                        <div class="justify-self-start text-3xl font-semibold">#56165</div>
                                        <div class="justify-self-start font-medium tracking-tight text-secondary">ORDER
                                            DATE</div>
                                        <div class="font-medium">Feb 19, 2022</div>
                                        <div class="justify-self-start font-medium tracking-tight text-secondary">DUE
                                            DATE</div>
                                        <div class="font-medium">Aug 19, 2022</div>
                                        <div class="justify-self-start font-medium tracking-tight text-secondary">TOTAL
                                            DUE</div>
                                        <div class="font-medium">$49,000.00</div>
                                    </div>
                                </div>

                                <div class="grid grid-cols-12 gap-x-1 mt-8" *ngIf="orderProducts?.length > 0">
                                    <div class="col-span-12 border-b" *ngFor="let item of orderProducts">
                                        <div class="row">
                                            <div class="col-9">
                                                <p class="font-bold text-secondary text-medium">
                                                    ({{item.product?.pk_productID}})
                                                    {{item.product?.productNumber}}: {{item.product?.productName}}
                                                </p>
                                            </div>
                                        </div>
                                        <div class="grid grid-cols-12 gap-x-1 mt-1">
                                            <div class="col-span-7 font-medium text-md text-secondary">DETAILS</div>
                                            <div class="font-medium text-md text-center text-secondary">QTY</div>
                                            <div class="font-medium col-span-2  text-md text-center text-secondary">
                                                <p>COST</p>
                                                <p>unit*qty</p>
                                            </div>
                                            <div class="font-medium col-span-2 text-md text-center text-secondary">
                                                <p>PRICE</p>
                                                <p>price*qty</p>
                                            </div>
                                            <!-- Divider -->
                                            <div class="col-span-12 my-4 border-b"></div>
                                            <div class="col-span-7 font-medium text-md text-secondary">
                                                <p>COLOR/SIZE BREAKDOWN</p>
                                                <p>{{item.product?.colorName}}</p>
                                            </div>
                                            <div class="font-medium text-md  text-center text-secondary">
                                                {{item.product?.quantity}}</div>
                                            <div class="col-span-2 text-center font-medium text-md  text-secondary">
                                                <!-- (${{item.product?.cost}} * {{item.product?.quantity}} = -->
                                                <p>{{item.product?.cost}} * {{item.product?.quantity}}</p>
                                                <p>=</p>
                                                {{(item.product?.cost * item.product?.quantity) | currency}}
                                            </div>
                                            <div class="text-center font-medium col-span-2 text-md text-secondary">
                                                <!-- (${{item.product?.price}} * {{item.product?.quantity}} = -->
                                                <p>{{item.product?.price}} * {{item.product?.quantity}}</p>
                                                <p>=</p>
                                                {{(item.product?.price * item.product?.quantity) | currency}}
                                            </div>

                                            <!-- imprints -->
                                            <div *ngIf="item.imprints"
                                                class="mt-2 col-span-7 font-medium text-md text-secondary">
                                                <p>Imprints</p>
                                                <p>{{item.imprints?.locationName}} ({{item.imprints?.methodName}})
                                                </p>
                                                <p class="text-red-500 font-bold">Reorder#:
                                                    {{item?.imprints.reorderNumber}}</p>
                                            </div>
                                            <div class="font-medium text-md  text-center text-secondary">
                                                {{item.product?.quantity}}</div>
                                            <div class="col-span-2 text-center font-medium text-md  text-secondary">
                                                {{(item.imprints?.runCost * item.imprints?.quantity) | currency}}
                                            </div>
                                            <div class="text-center font-medium col-span-2 text-md text-secondary">
                                                {{(item.imprints?.runPrice * item.imprints?.quantity) | currency}}
                                            </div>
                                            <!-- Setups -->
                                            <div *ngIf="item.imprints"
                                                class="mt-2 col-span-7 font-medium text-right text-md text-secondary">
                                                <p>Setup(s)</p>
                                            </div>
                                            <div class="font-medium text-md  text-center text-secondary">
                                            </div>
                                            <div class="col-span-2 text-center font-medium text-md  text-secondary">
                                                {{(item.imprints?.setupCost) | currency}}</div>
                                            <div class="text-center font-medium col-span-2 text-md text-secondary">
                                                {{(item.imprints?.setupPrice) | currency}}</div>

                                            <!-- Mechandise Subtotal -->
                                            <div class="mt-2 col-span-7 font-medium text-md text-secondary mb-4">
                                                <p>Merchandise SubTotal</p>
                                            </div>
                                            <div class="font-medium text-md  text-center text-secondary">
                                            </div>
                                            <div class="col-span-2 text-center font-medium text-md  font-bold">
                                                {{((item.imprints?.runCost * item.product?.quantity) +
                                                (item.product?.cost * item.product?.quantity) +
                                                (item.imprints?.setupCost) ) | currency}}</div>
                                            <div class="text-center font-medium col-span-2 text-md font-bold">
                                                {{((item.imprints?.runPrice * item.product?.quantity) +
                                                (item.product?.price * item.product?.quantity) +
                                                (item.imprints?.setupPrice) ) | currency}}</div>
                                        </div>
                                    </div>
                                    <div class="col-span-10 self-center font-medium tracking-tight text-secondary">
                                        TOTAL DISCOUNT
                                    </div>
                                    <div class="col-span-2 text-right text-lg">$0.00</div>
                                    <div class="col-span-10 self-center font-medium tracking-tight text-secondary">
                                        TOTAL TAX
                                    </div>
                                    <div class="col-span-2 text-right text-lg">$0.00</div>
                                    <div class="col-span-10 self-center font-medium tracking-tight text-secondary">
                                        ADJUSTMENTS
                                    </div>
                                    <div class="col-span-2 text-right text-lg">$0.00</div>
                                    <div class="col-span-8 self-center font-medium tracking-tight text-secondary">
                                        GRAND TOTAL
                                    </div>
                                    <div class="col-span-2 text-right text-lg">{{grandTotalCost | currency}}</div>
                                    <div class="col-span-2 text-right text-lg">{{grandTotalPrice | currency}}</div>
                                </div>




                                <div class="mt-10">
                                    <div style="text-align: -webkit-center;">
                                        <img class="w-40" src="assets/images/logo/consolidus-logo.jpeg">
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </fuse-card>
    </div>
</div>