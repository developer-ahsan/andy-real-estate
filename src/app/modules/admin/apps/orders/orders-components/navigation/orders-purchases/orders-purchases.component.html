<div class="w-full">
    <ngx-skeleton-loader count="15" appearance="line" animation="pulse" *ngIf="isLoading">
    </ngx-skeleton-loader>
    <div class="row" *ngIf="!isLoading">
        <div class="col-12 my-2">
            <fuse-card class="rounded-2xl shadow bg-card flex flex-col lg:flex-row w-full">
                <div class="w-full">
                    <div class="p-6 sm:p-8 lg:p-10 w-full">
                        <div class="text-2xl font-bold ">
                            Purchase Orders
                        </div>
                        <div class="mt-5" *ngIf="isView">
                            <div *ngIf="isDetailLoader">
                                <ngx-skeleton-loader count="15" appearance="line" animation="pulse">
                                </ngx-skeleton-loader>
                            </div>
                            <div *ngIf="!isDetailLoader"
                                class="relative bg-light flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between  ">

                                <!-- Title -->
                                <div class="text-1xl font-semibold">View PURCHASE ORDER #
                                    {{purchaseDetails?.purchaseOrderNumber}}</div>
                                <!-- Actions -->
                                <div class="flex flex-shrink-0 items-center mt-6 sm:mt-0 sm:ml-4">
                                    <!-- <button (click)="exportHtmlToPDF()" [matTooltip]="'Save report as PDF'"
                                        class="float-right mr-2" mat-stroked-button>
                                        <mat-icon svgIcon="mat_outline:picture_as_pdf"></mat-icon>
                                        <span class="ml-2 mr-1">PDF</span>
                                    </button> -->
                                    <!-- Back to Customers Page button -->
                                    <button class="ml-4" mat-stroked-button [color]="'primary'"
                                        (click)="viewPurchaseOrder(null)">
                                        <mat-icon [svgIcon]="'heroicons_outline:arrow-narrow-left'"></mat-icon>
                                        <span class="ml-2 mr-1">Back to Purchases List</span>
                                    </button>
                                </div>
                            </div>

                            <div *ngIf="!isDetailLoader"
                                class="mt-5 inset-0 min-w-0 text-center print:overflow-visible">
                                <!-- Main -->
                                <div class="inline-block  text-left print:p-0 w-full" id="htmltable" #htmltable>

                                    <!-- Shipping Report -->
                                    <div
                                        class="print:w-auto print:p-0 print:rounded-none print:shadow-none print:bg-transparent ">

                                        <!-- <div class="flex items-start "> -->
                                        <div class="grid grid-rows-1 mt-5">
                                            <div class="grid grid-flow-col mt-5">
                                                <div class="text-md font-medium tracking-tight text-secondary">
                                                    <div>Consolidus LLC</div>
                                                    <div>526 S.Main St.</div>
                                                    <div>Suite 804</div>
                                                    <div>Akron, OH 44311</div>
                                                    <div>P: 1-866-776-6643, F: 330-319-7214</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="grid grid-cols-2 gap-x-4 gap-y-1 ml-auto">
                                            <div
                                                class="justify-self-start font-semibold text-3xl tracking-tight text-secondary">
                                                PURCHASE ORDER #
                                            </div>
                                            <div class="justify-self-start text-3xl font-semibold">
                                                #{{purchaseDetails?.purchaseOrderNumber}}</div>
                                            <div class="justify-self-start font-medium tracking-tight text-secondary">
                                                CUSTOMER PURCHASE ORDER #
                                            </div>
                                            <div class="font-medium">{{purchaseDetails?.shipToPurchaseOrder}}</div>
                                            <div class="justify-self-start font-medium tracking-tight text-secondary">
                                                VENDOR
                                            </div>
                                            <div class="font-medium">
                                                <p>{{purchaseDetails?.vendorShippingName}}</p>
                                                <p>{{purchaseDetails?.vendorShippingAddress1}}</p>
                                                <p>{{purchaseDetails?.vendorShippingCity + ' ' +
                                                    purchaseDetails?.vendorShippingState + ' ' +
                                                    purchaseDetails?.vendorShippingZip}}</p>
                                                <p>{{purchaseDetails?.vendorShippingPhone}}</p>
                                                <p>{{purchaseDetails?.vendorShippingFax}}</p>
                                            </div>
                                            <div class="justify-self-start font-medium tracking-tight text-secondary">
                                                SHIPPING
                                            </div>
                                            <div class="font-medium">{{purchaseDetails?.shippingComment}}</div>
                                            <div class="justify-self-start font-medium tracking-tight text-secondary">
                                                IN-HANDS DATE </div>
                                            <div class="font-medium">{{(purchaseDetails?.inHandsDate | date:
                                                'MM/DD/yyyy') || not_available}}
                                            </div>
                                        </div>
                                        <!-- </div> -->

                                        <div class="grid grid-cols-12 gap-x-1 mt-16 w-full">
                                            <!-- Item -->
                                            <div class="col-span-12 my-2 w-full">
                                                <div class="grid grid-cols-12 w-full">
                                                    <div class="col-span-8 text-lg font-medium">
                                                        <p class="">
                                                            {{purchaseDetails?.productName}}
                                                        </p>
                                                        <p>Quantity: {{purchaseDetails?.quantity}}</p>
                                                    </div>
                                                    <!-- Spacer -->
                                                    <div class="col-span-12 mt-6"></div>
                                                </div>
                                            </div>
                                            <div class="col-span-4">
                                                Standard Lead Time
                                            </div>
                                            <div class="col-span-8">
                                                <p *ngIf="isViewData.fk_vendorID == 3 || isViewData.fk_vendorID == 60">
                                                    24 Hour Production Requested</p>
                                                <p *ngIf="isViewData.fk_vendorID != 3 && isViewData.fk_vendorID != 60">
                                                    {{purchaseDetails?.prodTimeMin}}-{{purchaseDetails?.prodTimeMax}}
                                                    business days</p>
                                            </div>
                                            <div class="col-span-4">
                                                Vendor FOB
                                            </div>
                                            <div class="col-span-8">
                                                {{purchaseDetails?.vendorShippingZip}}
                                            </div>
                                            <div class="col-span-4">
                                                Ship TO:
                                            </div>
                                            <div class="col-span-8">
                                                {{purchaseDetails?.shipToCompanyName}}
                                                <br>
                                                {{purchaseDetails?.shipToCustomerName}}
                                                <br>
                                                PO:{{purchaseDetails?.shipToPurchaseOrder}}
                                                <br>
                                                {{purchaseDetails?.shipToAddress}}
                                                <br>
                                                {{purchaseDetails?.shipToDeliverTo}}
                                                <br>
                                                {{purchaseDetails?.shipToCity + ',' + purchaseDetails?.shipToState + ' '
                                                + purchaseDetails?.shipToZip}}
                                                <br>
                                                {{purchaseDetails?.shipToCountry}}
                                                <br>
                                                P:{{purchaseDetails?.shippingPhoneShipTO}}
                                                <br>
                                                E:{{purchaseDetails?.shippingEmailShipTO}}
                                            </div>
                                            <!-- Colors -->
                                            <div class="col-span-7 font-medium text-md font-bold">
                                                <p>COLOR/SIZE BREAKDOWN</p>
                                            </div>
                                            <div class="col-span-1 font-medium text-md text-center text-secondary">QTY
                                            </div>
                                            <div class="col-span-2 font-medium text-md text-center text-secondary">
                                                <span>unit</span>
                                            </div>
                                            <div class="col-span-2 font-medium text-md text-center text-secondary">
                                                <span>total</span>
                                            </div>
                                            <div class="col-span-12 my-2" *ngFor="let colors of orderProducts">
                                                <div class="grid grid-cols-12">
                                                    <div class="col-span-7 font-medium text-md text-secondary">
                                                        <p>{{colors.product.colorName}} <span
                                                                *ngIf="colors.product.sizeName"> &
                                                                {{colors.product.sizeName}}</span></p>
                                                    </div>
                                                    <div
                                                        class="col-span-1 font-medium text-md text-center text-secondary">
                                                        {{colors.product.quantity}}</div>
                                                    <div
                                                        class="col-span-2 font-medium text-md text-center text-secondary">
                                                        <span>{{colors.product.runCost | currency: 'USD':
                                                            'symbol-narrow': '.3-3'}}</span>
                                                    </div>
                                                    <div
                                                        class="col-span-2 font-medium text-md text-center text-secondary">
                                                        <span>{{(colors.product.runCost *
                                                            colors.product.quantity) | currency: 'USD':
                                                            'symbol-narrow': '.3-3'
                                                            }}</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Imprints -->
                                            <div class="mt-2 col-span-12 font-medium font-bold text-md">
                                                <p>IMPRINTS</p>
                                                <p class="text-red-500">Only if proof is necessary, and is of no charge,
                                                    please send proof to artwork@MiamiOHshop.com</p>
                                            </div>
                                            <div class="col-span-12 my-2" *ngFor="let imprint of orderProducts">
                                                <div class="grid grid-cols-12">
                                                    <div class="col-span-7 font-medium text-md text-secondary">
                                                        <p>{{imprint?.imprints.locationName}}
                                                            ({{imprint?.imprints.methodName}})
                                                        </p>
                                                    </div>
                                                    <div
                                                        class="font-small col-span-1 text-sm  text-center text-secondary">
                                                        {{imprint?.imprints.quantity}}
                                                    </div>
                                                    <div
                                                        class="col-span-2 text-center font-small text-sm  text-secondary">
                                                        <span>{{imprint?.imprints.runCost | currency: 'USD':
                                                            'symbol-narrow': '.3-3'}}</span>
                                                    </div>
                                                    <div
                                                        class="col-span-2 text-center font-small text-sm  text-secondary">
                                                        <span>{{(imprint?.imprints.runCost *
                                                            imprint?.imprints.quantity) | currency: 'USD':
                                                            'symbol-narrow': '.3-3'}}</span>
                                                    </div>
                                                    <!-- Setups -->
                                                    <div
                                                        class="mt-2 col-span-7 font-medium text-right text-md text-secondary">
                                                        <p>Setup(s)</p>
                                                    </div>
                                                    <div class="font-medium text-md  text-center text-secondary">
                                                    </div>
                                                    <div
                                                        class="pl-3 flex justify-between mt-2 col-span-2 text-center font-small text-sm  text-secondary">
                                                        <span></span>

                                                    </div>
                                                    <div
                                                        class=" mt-2 col-span-2 text-center font-small text-sm  text-secondary">
                                                        <span>{{(imprint?.imprints.setupCost) | currency: 'USD':
                                                            'symbol-narrow': '.3-3'}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Total -->
                                            <div
                                                class="col-span-8 self-center text-lg font-medium tracking-tight text-secondary">
                                                MERCHANDISE SUB-TOTAL
                                            </div>
                                            <div class="col-span-2 text-center font-medium">
                                            </div>
                                            <div class="col-span-2 text-center font-medium">{{purchaseDetails?.POTotal |
                                                currency}}
                                            </div>
                                            <div class="col-span-12 border-b"></div>
                                            <div
                                                class="col-span-8 self-center text-2xl font-medium tracking-tight text-secondary">
                                                TOTAL
                                            </div>
                                            <div class="col-span-2 text-center font-medium">
                                            </div>
                                            <div class="col-span-2 text-center font-medium">{{purchaseDetails?.POTotal |
                                                currency}}
                                            </div>
                                        </div>

                                        <div class="mt-10">
                                            <div style="text-align: -webkit-center;">
                                                <img class="w-40" src="assets/images/logo/consolidus-logo.jpeg">
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Listing -->
                    <div *ngIf="!isView" class=" pb-5">
                        <p class="font-bold text-center text-lg" *ngIf="purchases.data.length == 0">No data found.</p>
                        <table *ngIf="purchases.data.length > 0" mat-table [dataSource]="purchases.data" class="w-full">
                            <!-- Company Column -->
                            <ng-container matColumnDef="company">
                                <th mat-header-cell *matHeaderCellDef class="bg-light"> Company
                                </th>
                                <td mat-cell *matCellDef="let item" (click)="viewPurchaseOrder(item)"
                                    style="color: #959595; text-decoration: underline; cursor: pointer;">
                                    {{item.companyName}}
                                </td>
                                <td mat-footer-cell *matFooterCellDef class="bg-light font-semibold">
                                    Shipping</td>
                            </ng-container>

                            <!-- Supplies Column -->
                            <ng-container matColumnDef="supplies">
                                <th mat-header-cell *matHeaderCellDef class="bg-light"> Supplies
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    <mat-icon class="text-green-400 icon-size-5" *ngIf="element.blnSupplier"
                                        [svgIcon]="'heroicons_solid:check'">
                                    </mat-icon>
                                    <mat-icon class="text-red-400 icon-size-5" *ngIf="!element.blnSupplier"
                                        [svgIcon]="'heroicons_solid:x'"></mat-icon>
                                </td>
                                <td mat-footer-cell *matFooterCellDef class="bg-light"></td>
                            </ng-container>

                            <!-- Decorates Column -->
                            <ng-container matColumnDef="decorates">
                                <th mat-header-cell *matHeaderCellDef class="bg-light"> Decorates
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    <mat-icon class="text-green-400 icon-size-5" *ngIf="element.blnDecorator"
                                        [svgIcon]="'heroicons_solid:check'">
                                    </mat-icon>
                                    <mat-icon class="text-red-400 icon-size-5" *ngIf="!element.blnDecorator"
                                        [svgIcon]="'heroicons_solid:x'">
                                    </mat-icon>
                                </td>
                                <td mat-footer-cell *matFooterCellDef class="bg-light"></td>
                            </ng-container>

                            <!-- Digitizes Column -->
                            <ng-container matColumnDef="digitizes">
                                <th mat-header-cell *matHeaderCellDef class="bg-light"> Digitizes
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    <mat-icon class="text-green-400 icon-size-5" *ngIf="element.blnDigitizes"
                                        [svgIcon]="'heroicons_solid:check'">
                                    </mat-icon>
                                    <mat-icon class="text-red-400 icon-size-5" *ngIf="!element.blnDigitizes"
                                        [svgIcon]="'heroicons_solid:x'">
                                    </mat-icon>
                                </td>
                                <td mat-footer-cell *matFooterCellDef class="bg-light"></td>
                            </ng-container>

                            <!-- Cost Column -->
                            <ng-container matColumnDef="total">
                                <th mat-header-cell *matHeaderCellDef class="bg-light"> Total Price
                                </th>
                                <td mat-cell *matCellDef="let element"> {{(element.total).toFixed(2) | currency}} </td>
                                <td mat-footer-cell *matFooterCellDef class="bg-light font-semibold">
                                    {{(purchases?.shippingPrice[0].shippingCost).toFixed(2) | currency }} </td>
                            </ng-container>
                            <!-- Shipping Footer -->
                            <ng-container matColumnDef="companys">
                                <td mat-footer-cell *matFooterCellDef></td>
                            </ng-container>
                            <ng-container matColumnDef="suppliess">
                                <td mat-footer-cell *matFooterCellDef></td>
                            </ng-container>
                            <ng-container matColumnDef="decoratess">
                                <td mat-footer-cell *matFooterCellDef></td>
                            </ng-container>
                            <ng-container matColumnDef="shippingtotal">
                                <td mat-footer-cell *matFooterCellDef class="font-semibold">Total</td>
                            </ng-container>
                            <ng-container matColumnDef="totals">
                                <td mat-footer-cell *matFooterCellDef class="font-semibold">
                                    {{totalShippingCost.toFixed(2)}}</td>
                            </ng-container>


                            <tr mat-header-row *matHeaderRowDef="displayedColumns" class="h-18">
                            </tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns;"
                                class="h-12 hover:bg-gray-100 dark:hover:bg-hover"></tr>
                            <tr mat-footer-row *matFooterRowDef="displayedColumns" class="h-18">
                            </tr>
                            <tr mat-footer-row *matFooterRowDef="displayedColumns1" class="h-18">
                            </tr>
                        </table>
                    </div>
                </div>
            </fuse-card>
        </div>

    </div>
</div>