<ngx-skeleton-loader count="8" appearance="line" animation="pulse" *ngIf="isLoading">
</ngx-skeleton-loader>
<div #topScrollAnchor></div>
<div class="row" *ngIf="!isLoading">
    <div class="col-12 space-y-3">
        <fuse-card class="rounded-2xl shadow bg-card flex flex-col w-full px-8 pt-6 pb-4 filter-list"
            *ngIf="assignedStores.length > 0">
            <div class="flex items-center justify-between">
                <div class="text-2xl font-semibold leading-tight">Assigned Stores</div>
            </div>
            <div class="flex flex-col mt-5">
                <div class="flex items-center my-2" *ngFor="let item of assignedStores">
                    <img class="w-14 h-14 mr-4 rounded object-cover"
                        src="{{imgUrl}}/HiRes/{{item.pk_storeProductID}}.jpg"
                        (error)="this.src='https://assets.consolidus.com/globalAssets/Products/coming_soon.jpg'"
                        alt="Card cover image">
                    <div class="flex flex-col min-w-0">
                        <div class="font-medium leading-none w-100">{{item.storeName}}</div>
                        <div class="text-md leading-none mt-1  w-100">{{item.storeName}}</div>
                        <div class="text-md leading-none text-secondary mt-2">{{item.pk_storeProductID}}</div>
                    </div>
                    <div class="flex-col w-full text-right">
                        <mat-checkbox>Add to rapidBuild</mat-checkbox>
                    </div>
                </div>
            </div>
            <div class="flex items-center mt-6 -mx-3">
                <button class="px-3" mat-stroked-button [matTooltip]="'Add select images to rapidBuild'">
                    Add select images to rapidBuild
                </button>
            </div>
        </fuse-card>
        <!-- Assign to a new store -->
        <fuse-card class="rounded-2xl shadow bg-card flex flex-col lg:flex-row w-full">
            <div class="p-6 sm:p-8 lg:p-10 w-full">
                <div class="text-2xl font-bold">
                    Assign to a new store
                </div>

                <!-- Store options -->
                <div class="row my-5">
                    <div class="col-lg-3 col-md-3 col-6">
                        <mat-checkbox (click)="selectAll()"> Un/select all </mat-checkbox>
                    </div>
                    <div class="col-lg-3 col-md-3 col-6">
                        <mat-checkbox (click)="copyImageToggle()"> Copy Image </mat-checkbox>
                    </div>
                    <div class="col-lg-3 col-md-3 col-6">
                        <mat-checkbox [disabled]="true"> Take Online </mat-checkbox>
                    </div>
                    <div class="col-lg-3 col-md-3 col-6">
                        <mat-checkbox [checked]="isRapidBuild" (click)="rapidBuildToggle()"> Add to rapid build
                        </mat-checkbox>
                    </div>
                    <div class="col-lg-4 col-md- 4 col-12">
                        <mat-checkbox> Copy Margins from last store </mat-checkbox>
                    </div>
                </div>
                <div class="row" *ngIf="isRapidBuild">
                    <div class="col-12">
                        <mat-form-field class="w-full">
                            <mat-label>RapidBuild Comments:</mat-label>
                            <textarea matInput rows="5" [(ngModel)]="ngComment"></textarea>
                        </mat-form-field>
                    </div>
                </div>
                <div class="row" *ngIf="isCopyImage">
                    <div class="col-12">
                        <mat-form-field class="w-full">
                            <mat-label>Select store to pull image from:</mat-label>
                            <mat-select>
                                <mat-option *ngFor="let item of assignedStores">{{item.storeName}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div>
                <div class="row mb-5">
                    <div class="col-lg-3 col-md-3 col-6" *ngFor="let store of storesData">
                        <mat-checkbox (change)="checkOrRemoveCheckBoxes($event, store)" [checked]="allSelected"
                            style="font-size: 10.5px;"> {{store.storeName}}
                        </mat-checkbox>
                    </div>
                    <div class="col-12 cursor-pointer text-right hover:text-gray-900" style="font-size: 10.5px;"
                        *ngIf="storesData.length > 0 && storesData.length < totalStoresData"
                        (click)="getAllActiveStores(page)">
                        <p *ngIf="!isViewMoreLoader" class="mr-10">View More</p>
                        <mat-progress-spinner style="display: initial;" class="mr-10" *ngIf="isViewMoreLoader"
                            [diameter]="24" [mode]="'indeterminate'">
                        </mat-progress-spinner>
                    </div>
                </div>

                <div class="flex items-center justify-end w-full">
                    <div class="flex items-center my-2">
                        <button class="min-w-40" mat-stroked-button [matTooltip]="'Assign new store'"
                            (click)="addStoreProduct()" [disabled]="selectedTermUpdateLoader">
                            <mat-progress-spinner *ngIf="selectedTermUpdateLoader" [diameter]="24"
                                [mode]="'indeterminate'">
                            </mat-progress-spinner>
                            <mat-icon *ngIf="!selectedTermUpdateLoader" [svgIcon]="'heroicons_outline:plus'"></mat-icon>
                            <span *ngIf="!selectedTermUpdateLoader" class="ml-1 mr-1">Add Store</span>
                        </button>
                    </div>
                </div>
            </div>
        </fuse-card>
    </div>
</div>