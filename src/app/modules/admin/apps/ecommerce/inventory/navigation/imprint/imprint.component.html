<ngx-skeleton-loader count="8" appearance="line" animation="pulse" *ngIf="isLoading">
</ngx-skeleton-loader>
<div class="row my-2 py-5 mx-5 overflow-auto" *ngIf="!isLoading">
    <div class="col-12">
        <mat-button-toggle-group #group="matButtonToggleGroup" [value]="showImprintScreen"
            (change)="calledScreen(group.value)">
            <mat-button-toggle value="Imprints">
                Imprints
            </mat-button-toggle>
            <mat-button-toggle value="Display Order">
                Display Order
            </mat-button-toggle>
            <mat-button-toggle value="Overlapping" [disabled]="true">
                Overlapping
            </mat-button-toggle>
            <mat-button-toggle value="Price Inclusion">
                Price Inclusion
            </mat-button-toggle>
            <mat-button-toggle value="Test Pricing">
                Test Pricing
            </mat-button-toggle>
            <mat-button-toggle value="Add Imprint">
                Add Imprint
            </mat-button-toggle>
        </mat-button-toggle-group>
    </div>
</div>

<!-- Add Imprint -->
<div *ngIf="!isLoading && showImprintScreen == 'Add Imprint'">
    <fuse-card class="rounded-2xl bg-card flex flex-col lg:flex-row w-full">
        <div class="p-6 sm:p-8 lg:p-10 w-full">
            <div class="text-2xl font-bold">
                Add Imprint
            </div>
            <!-- Features -->
            <div class="gap-y-4 mt-6">
                <div class="row">
                    <!-- Decorator -->
                    <div class="col-12">
                        <b>Decorator</b>
                    </div>
                    <div class="col-12">
                        <mat-form-field class="w-full" appearance="fill">
                            <mat-select [(ngModel)]="selectedValue" name="food">
                                <mat-option *ngFor="let food of foods" [value]="food.value">
                                    {{food.viewValue}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>

                    <!-- Imprint Method -->
                    <div class="col-12">
                        <b>
                            <button
                                [matTooltip]="'To add a new method, select (NEW METHOD) in the menu and then enter the name in the box to the right'">
                                <i class="fa fa-info-circle"></i>
                            </button>
                            Imprint Method
                        </b>
                    </div>
                    <div class="col-lg-6 col-12">
                        <mat-form-field class="w-full" appearance="fill">
                            <mat-select [(ngModel)]="selectedValue" name="food">
                                <mat-option *ngFor="let food of foods" [value]="food.value">
                                    {{food.viewValue}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="col-lg-6 col-12">
                        <mat-form-field appearance="fill" class="w-full">
                            <input matInput placeholder="New Method Name">
                        </mat-form-field>
                    </div>

                    <!-- Location -->
                    <div class="col-12">
                        <b>
                            <button
                                [matTooltip]="'To add a new location, select (NEW LOCATION) in the menu and then enter the name in the box to the right'">
                                <i class="fa fa-info-circle"></i>
                            </button>
                            Location
                        </b>
                    </div>
                    <div class="col-lg-6 col-12">
                        <mat-form-field class="w-full" appearance="fill">
                            <mat-select [(ngModel)]="selectedValue" name="food">
                                <mat-option *ngFor="let food of foods" [value]="food.value">
                                    {{food.viewValue}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="col-lg-6 col-12">
                        <mat-form-field appearance="fill" class="w-full">
                            <input matInput placeholder="New Location Name">
                        </mat-form-field>
                    </div>

                    <!-- Imprint Area -->
                    <div class="col-12">
                        <b>Imprint Area (max)</b>
                    </div>
                    <div class="col-12">
                        <mat-form-field appearance="fill" class="w-full">
                            <input matInput>
                        </mat-form-field>
                    </div>

                    <!-- Details -->
                    <div class="col-12">
                        <b>How are the charges applied?</b>
                    </div>
                    <div class="col-12">
                        <mat-radio-group aria-labelledby="example-radio-group-label" class="example-radio-group"
                            [(ngModel)]="favoriteSeason">
                            <mat-radio-button class="example-radio-button" *ngFor="let season of seasons"
                                [value]="season">
                                {{season}}
                            </mat-radio-button>
                        </mat-radio-group>
                    </div>
                    <div class="col-12">
                        <b>Does the user need to specify imprint colors?</b>
                    </div>
                    <div class="col-12">
                        <mat-radio-group aria-labelledby="example-radio-group-label" class="example-radio-group">
                            <mat-radio-button class="example-radio-button" [value]="Yes">
                                Yes
                            </mat-radio-button>
                            <mat-radio-button class="example-radio-button" [value]="No">
                                No
                            </mat-radio-button>
                        </mat-radio-group>
                    </div>
                    <div class="col-12">
                        <b>Max Colors</b>
                    </div>
                    <div class="col-12">
                        <mat-form-field class="w-full" appearance="fill">
                            <mat-select [(ngModel)]="selectedValue" name="food">
                                <mat-option *ngFor="let food of foods" [value]="food.value">
                                    {{food.viewValue}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>

                    <!-- Imprint order itself -->
                    <div class="col-12">
                        <b>Can this imprint be ordered by itself?</b>
                    </div>
                    <div class="col-12">
                        <small class="leading-relaxed text-secondary font-semibold">
                            *This option determines whether this imprint can be ordered by itself. For example, if the
                            location of this imprint is "second side," this implies that there must be a first side, and
                            so it cannot be ordered by itself.
                        </small>
                    </div>
                    <div class="col-12">
                        <mat-radio-group aria-labelledby="example-radio-group-label" class="example-radio-group">
                            <mat-radio-button class="example-radio-button" [value]="Yes">
                                Yes, this imprint can be ordered by itself.
                            </mat-radio-button>
                            <mat-radio-button class="example-radio-button" [value]="No">
                                No, this imprint cannot be ordered by itself.
                            </mat-radio-button>
                        </mat-radio-group>
                    </div>

                    <!-- Imprint order itself -->
                    <div class="col-12">
                        <b>Price Inclusion</b>
                    </div>
                    <div class="col-12">
                        <mat-radio-group aria-labelledby="example-radio-group-label" class="example-radio-group">
                            <mat-radio-button class="example-radio-button" [value]="Yes">
                                Yes, when it's the only imprint, the first process is included in the product price.
                            </mat-radio-button>
                            <mat-radio-button class="example-radio-button" [value]="No">
                                No, all processes, including the first are extra.
                            </mat-radio-button>
                        </mat-radio-group>
                    </div>

                    <!-- Minimum Product Quantity -->
                    <div class="col-12">
                        <b>
                            <button
                                [matTooltip]="'Other than one (1) only if this imprint requires a product qty more than the min'">
                                <i class="fa fa-info-circle"></i>
                            </button>
                            Minimum Product Quantity
                        </b>
                    </div>
                    <div class="col-12">
                        <mat-form-field appearance="fill" class="w-full">
                            <input matInput value="1">
                        </mat-form-field>
                    </div>

                    <!-- Live Imprint Comments -->
                    <div class="col-12">
                        <b>
                            Live Imprint Comments - 250 charecters max
                        </b>
                    </div>
                    <div class="col-12">
                        <mat-form-field appearance="fill" class="w-full">
                            <textarea matInput rows="5"></textarea>
                        </mat-form-field>
                    </div>

                    <!-- Image -->
                    <div class="col-12">
                        <b>
                            <button [matTooltip]="'JPG, GIF, and PNG file types only!'">
                                <i class="fa fa-info-circle"></i>
                            </button>
                            Image (optional)
                        </b>
                    </div>
                    <div class="col-12">
                        <small class="leading-relaxed text-secondary font-semibold">
                            Add an image that will accompany the imprint for the user to use as reference when choosing
                            an imprint location.
                        </small>
                    </div>
                    <div class="col-12">
                        <mat-form-field appearance="fill" class="w-full">
                            <textarea matInput rows="5"></textarea>
                        </mat-form-field>
                    </div>

                    <!-- Display Order -->
                    <div class="col-12">
                        <b>Display Order</b>
                    </div>
                    <div class="col-12">
                        <mat-form-field appearance="fill" class="w-full">
                            <input matInput value="1">
                        </mat-form-field>
                    </div>
                </div>
            </div>
            <div class="flex items-center justify-end w-full">
                <div class="flex items-center my-2">
                    <div class="flex items-center mr-4" *ngIf="flashMessage">
                        <ng-container *ngIf="flashMessage === 'success'">
                            <mat-icon class="text-green-500" [svgIcon]="'heroicons_outline:check'">
                            </mat-icon>
                            <span class="ml-2">Product Margins Added successfully</span>
                        </ng-container>
                        <ng-container *ngIf="flashMessage === 'error'">
                            <mat-icon class="text-red-500" [svgIcon]="'heroicons_outline:x'"></mat-icon>
                            <span class="ml-2">An error occurred, try again!</span>
                        </ng-container>
                    </div>
                    <button class="min-w-40" mat-flat-button [color]="'primary'" [matTooltip]="'Add Imprint'"
                        (click)="addImprint()">
                        <mat-icon svgIcon="heroicons_outline:plus"></mat-icon>
                        <span class="ml-1 mr-1">Add Imprint</span>
                    </button>
                </div>
            </div>

        </div>
    </fuse-card>
</div>

<!-- Test Pricing -->
<div *ngIf="!isLoading && showImprintScreen == 'Test Pricing'">
    <div class="row">
        <div class="col-12 my-2">
            <fuse-card class="rounded-2xl bg-card flex flex-col lg:flex-row w-full">
                <div class="p-6 sm:p-8 lg:p-10 w-full">
                    <div class="text-2xl font-bold">
                        Select one or more Imprints
                    </div>
                    <!-- Features -->
                    <div class="gap-y-4 mt-6">
                        <form [formGroup]="testPricingForm">
                            <div class="row">
                                <div class="col-12">
                                    <small class="leading-relaxed text-secondary font-semibold">*The process number is
                                        required. (eg. 2 colors,
                                        9000
                                        stitches, 1 engraving, 1 debossing...)</small>
                                </div>
                                <div class="col-lg-8 col-12">
                                    <mat-form-field class="w-full" appearance="fill">
                                        <mat-select name="food" [formControlName]="'option1'">
                                            <mat-option *ngFor="let food of foods" [value]="food.value">
                                                {{food.viewValue}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                                <div class="col-lg-4 col-12">
                                    <mat-form-field class="w-full" appearance="fill">
                                        <mat-select name="food" [formControlName]="'option2'">
                                            <mat-option *ngFor="let food of foods" [value]="food.value">
                                                {{food.viewValue}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="flex items-center justify-end w-full">
                        <div class="flex items-center my-2">
                            <div class="flex items-center mr-4" *ngIf="flashMessage">
                                <ng-container *ngIf="flashMessage === 'success'">
                                    <mat-icon class="text-green-500" [svgIcon]="'heroicons_outline:check'">
                                    </mat-icon>
                                    <span class="ml-2">Updated successfully</span>
                                </ng-container>
                                <ng-container *ngIf="flashMessage === 'error'">
                                    <mat-icon class="text-red-500" [svgIcon]="'heroicons_outline:x'"></mat-icon>
                                    <span class="ml-2">An error occurred, try again!</span>
                                </ng-container>
                            </div>
                            <button class="min-w-40" mat-stroked-button [matTooltip]="'Update'" (click)="updateData()"
                                [disabled]="updateLoader">
                                <mat-progress-spinner *ngIf="updateLoader" [diameter]="24" [mode]="'indeterminate'">
                                </mat-progress-spinner>
                                <mat-icon *ngIf="!updateLoader" [svgIcon]="'mat_outline:edit'"></mat-icon>
                                <span *ngIf="!updateLoader" class="ml-1 mr-1">Update</span>
                            </button>
                        </div>
                    </div>
                </div>
            </fuse-card>
        </div>
    </div>
</div>

<!-- Price Inclusion -->
<div *ngIf="!isLoading && showImprintScreen == 'Price Inclusion'">
    <div class="row">
        <div class="col-12 my-2">
            <fuse-card class="rounded-2xl bg-card flex flex-col lg:flex-row w-full">
                <div class="p-6 sm:p-8 lg:p-10 w-full">
                    <div class="text-2xl font-bold">
                        Price Inclusion
                    </div>
                    <!-- Features -->
                    <div class="gap-y-4 mt-6">
                        <form [formGroup]="priceInclusionForm">
                            <div class="row">
                                <div class="col-12">
                                    <mat-checkbox [formControlName]="'checkBox'">
                                        FRONT/SCREEN PRINT - SHOWDOWN DISPLAYS
                                    </mat-checkbox>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="flex items-center justify-end w-full">
                        <div class="flex items-center my-2">
                            <div class="flex items-center mr-4" *ngIf="flashMessage">
                                <ng-container *ngIf="flashMessage === 'success'">
                                    <mat-icon class="text-green-500" [svgIcon]="'heroicons_outline:check'">
                                    </mat-icon>
                                    <span class="ml-2">Price Inclusion Updated successfully</span>
                                </ng-container>
                                <ng-container *ngIf="flashMessage === 'error'">
                                    <mat-icon class="text-red-500" [svgIcon]="'heroicons_outline:x'"></mat-icon>
                                    <span class="ml-2">An error occurred, try again!</span>
                                </ng-container>
                            </div>
                            <button class="min-w-40" mat-stroked-button [matTooltip]="'Update Price Inclusion'"
                                (click)="updatePriceInclusion()" [disabled]="priceInclusionLoader">
                                <mat-progress-spinner *ngIf="priceInclusionLoader" [diameter]="24"
                                    [mode]="'indeterminate'">
                                </mat-progress-spinner>
                                <mat-icon *ngIf="!priceInclusionLoader" [svgIcon]="'mat_outline:edit'"></mat-icon>
                                <span *ngIf="!priceInclusionLoader" class="ml-1 mr-1">Update</span>
                            </button>
                        </div>
                    </div>
                </div>
            </fuse-card>
        </div>
    </div>
</div>

<!-- Overlapping -->
<div *ngIf="!isLoading && showImprintScreen == 'Overlapping'">

</div>

<!-- Display Order -->
<div *ngIf="!isLoading && showImprintScreen == 'Display Order'">
    <div class="row">
        <div class="col-12">
            <mat-card class="w-full mb-10 p-0 h-full rounded-2xl shadow-lg">
                <div class="text-2xl font-bold p-5">
                    Imprint Display Order
                </div>

                <div *ngIf="dataSource2.length > 0;else other_content1">
                    <table mat-table [dataSource]="dataSource2" class="w-full border-t">

                        <!-- Color Column -->
                        <ng-container matColumnDef="id">
                            <th mat-header-cell *matHeaderCellDef
                                class="w-24 min-w-24 bg-gray-50 dark:bg-black dark:bg-opacity-5"> ID </th>
                            <td mat-cell *matCellDef="let element"> {{element.pk_imprintID}} </td>
                        </ng-container>

                        <!-- Run Column -->
                        <ng-container matColumnDef="name">
                            <th mat-header-cell *matHeaderCellDef
                                class="w-24 min-w-24 bg-gray-50 dark:bg-black dark:bg-opacity-5"> Name </th>
                            <td mat-cell *matCellDef="let element"> {{element.methodName}}/{{element.locationName}}
                            </td>
                        </ng-container>

                        <!-- Hex Column -->
                        <ng-container matColumnDef="decorator">
                            <th mat-header-cell *matHeaderCellDef
                                class="w-24 min-w-24 bg-gray-50 dark:bg-black dark:bg-opacity-5"> Decorator </th>
                            <td mat-cell *matCellDef="let element"> {{element.companyName}} </td>
                        </ng-container>

                        <!-- Active -->
                        <ng-container matColumnDef="order">
                            <th mat-header-cell *matHeaderCellDef
                                class="w-10 min-w-10 bg-gray-50 dark:bg-black dark:bg-opacity-5"> Order </th>
                            <td mat-cell *matCellDef="let element">
                                <mat-form-field class="w-2/3 mt-2" appearance="fill">
                                    <input matInput placeholder="Order#" value="{{element.displayOrder}}">
                                </mat-form-field>
                            </td>
                        </ng-container>

                        <!-- Action -->
                        <ng-container matColumnDef="action">
                            <th mat-header-cell *matHeaderCellDef
                                class="w-10 min-w-10 bg-gray-50 dark:bg-black dark:bg-opacity-5"> Action </th>
                            <td mat-cell *matCellDef="let element">
                                <mat-icon svgIcon="mat_outline:edit" class="ml-3"
                                    (click)="updateImprintDisplay(element)">
                                </mat-icon>
                            </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="imprintDisplayedColumns;" class="h-18"></tr>
                        <tr mat-row *matRowDef="let row; columns: imprintDisplayedColumns;"
                            class="h-14 hover:bg-gray-100 dark:hover:bg-hover" style="cursor: pointer;">
                        </tr>
                    </table>
                    <mat-paginator
                        class="sm:absolute sm:inset-x-0 border-b sm:border-t sm:border-b-0 z-10 bg-gray-50 dark:bg-transparent"
                        [ngClass]="{'pointer-events-none': isLoading}" [length]="dataSource2Length" [pageIndex]="0"
                        [pageSize]="10" (page)="getDisplayNextData($event)" [pageSizeOptions]="[10, 25]">
                    </mat-paginator>
                </div>
                <ng-template #other_content1>
                    <div class="text-secondary font-semibold p-5">
                        *No imprint display orders for this product.
                    </div>
                </ng-template>
            </mat-card>
        </div>
    </div>
</div>
<!-- Imprints List -->
<div *ngIf="!isLoading && showImprintScreen == 'Imprints'">
    <div class="row my-2">
        <div class="col-lg-8 col-12"></div>
        <div class="col-lg-2 col-6" *ngIf="dataSource.length">
            <button class="min-w-40" mat-stroked-button [matTooltip]="'Remove All Imprints'"
                (click)="deletAllImprints()" [disabled]="deleteLoader">
                <mat-progress-spinner *ngIf="deleteLoader" [diameter]="24" [mode]="'indeterminate'">
                </mat-progress-spinner>
                <mat-icon *ngIf="!deleteLoader" svgIcon="heroicons_outline:trash"></mat-icon>
                <span *ngIf="!deleteLoader" class="ml-1 mr-1">Remove All</span>
            </button>
        </div>
        <div class="col-lg-2 col-6">
            <button mat-flat-button [color]="'primary'" [matTooltip]="'Standard Imprints'">
                <span class="ml-1 mr-1">Standard Imprints</span>
            </button>
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <mat-card class="w-full mb-10 p-0 h-full rounded-2xl shadow-lg">
                <div class="row">
                    <div class="col-12">
                        <div class="text-2xl font-bold p-5">
                            Imprints
                        </div>
                    </div>
                </div>
                <div *ngIf="dataSource.length > 0;else other_content">
                    <table mat-table [dataSource]="dataSource" class="w-full border-t">

                        <!-- Color Column -->
                        <ng-container matColumnDef="location">
                            <th mat-header-cell *matHeaderCellDef
                                class="w-24 min-w-24 bg-gray-50 dark:bg-black dark:bg-opacity-5"> Location </th>
                            <td mat-cell *matCellDef="let element"> {{element.locationName}} </td>
                        </ng-container>

                        <!-- Run Column -->
                        <ng-container matColumnDef="method">
                            <th mat-header-cell *matHeaderCellDef
                                class="w-24 min-w-24 bg-gray-50 dark:bg-black dark:bg-opacity-5"> Method </th>
                            <td mat-cell *matCellDef="let element"> {{element.methodName}} </td>
                        </ng-container>

                        <!-- Hex Column -->
                        <ng-container matColumnDef="decorator">
                            <th mat-header-cell *matHeaderCellDef
                                class="w-40 min-w-40 bg-gray-50 dark:bg-black dark:bg-opacity-5"> Decorator </th>
                            <td mat-cell *matCellDef="let element"> {{element.companyName}} </td>
                        </ng-container>

                        <!-- Active -->
                        <ng-container matColumnDef="active">
                            <th mat-header-cell *matHeaderCellDef
                                class="w-10 min-w-10 bg-gray-50 dark:bg-black dark:bg-opacity-5"> Status </th>
                            <td mat-cell *matCellDef="let element">
                                <mat-icon class="text-green-400 icon-size-5" *ngIf="element.blnActive"
                                    [svgIcon]="'heroicons_solid:check'"></mat-icon>
                                <mat-icon class="text-red-400 icon-size-5" *ngIf="!element.blnActive"
                                    [svgIcon]="'heroicons_solid:x'"></mat-icon>
                            </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedColumns;" class="h-18"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns;"
                            class="h-14 hover:bg-gray-100 dark:hover:bg-hover" style="cursor: pointer;">
                        </tr>
                    </table>
                    <mat-paginator
                        class="sm:absolute sm:inset-x-0 border-b sm:border-t sm:border-b-0 z-10 bg-gray-50 dark:bg-transparent"
                        [ngClass]="{'pointer-events-none': isLoading}" [length]="dataSourceLength" [pageIndex]="0"
                        [pageSize]="20" (page)="getNextData($event)" [hidePageSize]="true">
                    </mat-paginator>
                </div>

                <ng-template #other_content>
                    <div class="text-secondary font-semibold p-5">
                        *No imprint list for this product.
                    </div>
                </ng-template>
            </mat-card>
        </div>
    </div>
</div>