<div class="inset-0 min-w-50 overflow-hidden bg-card dark:bg-transparent">
    <ngx-skeleton-loader
        count="8"
        appearance="line"
        animation="pulse"
        *ngIf="isLoading"
    >
    </ngx-skeleton-loader>
    <div *ngIf="!isLoading">
        <div class="border p-3 mt-3 h-30">
            <b class="text-2xl" style="color: #64748b">User Comments:</b>
            <mat-divider class="mb-2"></mat-divider>
            <div class="min-w-40 max-w-50 w-50 py-2 px-2" style="display: inline;">
                <div class="mobile-responsive-boxes text-secondary">
                    {{
                        adminComment ? 
                        adminComment : 
                        'No comments have been entered for this user.'
                    }}
                </div>
            </div>
        </div>
        <div class="border p-3 mt-3 h-300">
            <b class="text-1xl">New Comment:</b>
            <p>Comments cannot be updated or deleted. Jeff will be the author.</p>
            <p>All comments, including the new one will be emailed to the checked addresses, if any.</p>
            <mat-divider class="mb-2"></mat-divider>
            <div class="min-w-40 w-full py-2">
                <div class="w-full">
                    <form [formGroup]="commentAddingForm">
                        <span class="flex-to-block">
                            <mat-form-field class="half-to-full-with-boxes px-2">
                                <textarea matInput rows="10" placeholder="Add Comments here..." [formControlName]="'comment'"></textarea>
                            </mat-form-field>
                            <mat-selection-list #list class="half-to-full-with-boxes px-2">
                                <mat-list-option 
                                    *ngFor="let commentator of commentators" 
                                    (click)="selectOption(list)" 
                                    [value]="commentator.email"
                                    [selected]="allSelected"
                                >
                                    <p class="font-small">{{commentator.email}}</p>
                                </mat-list-option>
                                <mat-list-option (click)="selectAll()">
                                    <p class="font-medium font-semibold text-secondary">Select All</p>
                                </mat-list-option>
                            </mat-selection-list>
                        </span>
                        <mat-divider class="mb-2"></mat-divider>
                        <div class="flex items-center justify-end w-full px-8 py-4">
                            <div class="flex items-center">
                                <div
                                    class="flex items-center mr-4"
                                    *ngIf="flashMessage">
                                    <ng-container *ngIf="flashMessage === 'success'">
                                        <mat-icon
                                            class="text-green-500"
                                            [svgIcon]="'heroicons_outline:check'"></mat-icon>
                                        <span class="ml-2">Comment added successfully</span>
                                    </ng-container>
                                    <ng-container *ngIf="flashMessage === 'error'">
                                        <mat-icon
                                            class="text-red-500"
                                            [svgIcon]="'heroicons_outline:x'"></mat-icon>
                                        <span class="ml-2">An error occurred, try again!</span>
                                    </ng-container>
                                </div>
                                <button
                                    mat-flat-button
                                    [color]="'primary'"
                                    (click)="addComment()"
                                    [disabled]="commentUpdateLoader"
                                >
                                    Add
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
