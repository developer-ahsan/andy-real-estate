<div class="w-full">
    <div class="w-full">
        <div class="p-5" *ngIf="isLoading">
            <ngx-skeleton-loader count="8" appearance="line" animation="pulse" [theme]="{ 
                'background-color': '#dedede'
              }">
            </ngx-skeleton-loader>
        </div>

        <div class="mt-5" *ngIf="!isLoading && !isUpdateLicensing">
            <div class="shadow bg-card p-6">
                <mat-form-field class="w-full">
                    <mat-label>Add new licencing company</mat-label>
                    <input matInput [(ngModel)]="ngAddCompanyName">
                </mat-form-field>
                <div class="w-full text-right">
                    <button mat-button [disabled]="isAddNewCompanyLoader" mat-stroked-button class="min-w-30"
                        (click)="addNewLicense()">
                        <span *ngIf="!isAddNewCompanyLoader">Add</span>
                        <mat-progress-spinner *ngIf="isAddNewCompanyLoader" [diameter]="24" [mode]="'indeterminate'">
                        </mat-progress-spinner>
                    </button>
                </div>
            </div>
            <div *ngIf="dataSource.length > 0;else other_content" class="w-full">
                <table mat-table [dataSource]="dataSource" class="w-full border-t">
                    <ng-container matColumnDef="name">
                        <th mat-header-cell *matHeaderCellDef class="w-60 min-w-60">
                            Name
                        </th>
                        <td mat-cell *matCellDef="let element">
                            <input class="form-control text-sm" [(ngModel)]="element.name">
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="action">
                        <th mat-header-cell *matHeaderCellDef class="w-15 min-w-15 text-center">
                            Action
                        </th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                            <div class="flex justify-center">
                                <mat-icon *ngIf="!element.companyLoader" (click)="updateLicensingCompany(element)"
                                    svgIcon="heroicons_outline:check" matTooltip="Update Licensing Company"></mat-icon>
                                <mat-progress-spinner *ngIf="element.companyLoader" [diameter]="24"
                                    [mode]="'indeterminate'">
                                </mat-progress-spinner>
                                <mat-icon (click)="toggleUpdateCompanyData(element, true)"
                                    svgIcon="heroicons_outline:pencil-alt"
                                    matTooltip="Edit Licensing Company"></mat-icon>
                                <mat-icon (click)="deleteCompany(element)" svgIcon="heroicons_outline:trash"
                                    *ngIf="!element.delLoader" matTooltip="Delete Licensing Company"></mat-icon>
                                <mat-progress-spinner *ngIf="element.delLoader" [diameter]="24"
                                    [mode]="'indeterminate'">
                                </mat-progress-spinner>
                            </div>
                        </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColumns;" class="h-18 bg-light"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"
                        class="h-14 hover:bg-gray-100 dark:hover:bg-hover" style="cursor: pointer;">
                    </tr>
                </table>
                <mat-paginator #paginator class="border-b sm:border-t sm:border-b-0 z-10 bg-gray-50 dark:bg-transparent"
                    [ngClass]="{'pointer-events-none': isLoading}" [length]="totalUsers" [pageIndex]="0" [pageSize]="20"
                    (page)="getNextData($event)" [hidePageSize]="true">
                </mat-paginator>
            </div>
            <!-- No color Found -->
            <ng-template #other_content>
                <div class="text-secondary font-semibold p-5 text-center bg-card shadow">
                    There are currently no SmartArt users.
                </div>
            </ng-template>
        </div>
        <!-- Update Licensing -->
        <div *ngIf="isUpdateLicensing">
            <div class="shadow bg-card p-5 px-8 flex space-x-6 overflow-x-auto">
                <span class="font-medium cursor-pointer hover:text-gray-900 text-primary"
                    (click)="toggleUpdateCompanyData(null, false)" matTooltip="View Licensing Companies">Licensing
                    Companies</span>
                <span class="font-medium cursor-pointer hover:text-gray-900 text-secondary"
                    [ngClass]="{'text-gray-900': mainScreen=='Edit Company'}"
                    (click)="calledTermScreen('Edit Company')">Edit Company</span>
            </div>

            <!-- Edit User -->
            <div class="mt-5" *ngIf="mainScreen == 'Edit Company'">
                <div class="shadow bg-card p-6">
                    <ngx-skeleton-loader *ngIf="isCompanyTermLoader" count="8" appearance="line" animation="pulse"
                        [theme]="{ 
                        'background-color': '#dedede'
                      }">
                    </ngx-skeleton-loader>
                    <div class="w-full" *ngIf="!isCompanyTermLoader">
                        <div class="text-2xl font-bold"> Licensing Terms </div>
                        <mat-accordion class="example-headers-align" multi>
                            <div class="row">
                                <div class="col-12" *ngFor="let item of companytermData">
                                    <mat-expansion-panel class="my-2">
                                        <mat-expansion-panel-header>
                                            <mat-panel-title>
                                                {{item.term}}
                                            </mat-panel-title>
                                        </mat-expansion-panel-header>
                                        <div></div>
                                    </mat-expansion-panel>
                                </div>
                            </div>
                        </mat-accordion>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>