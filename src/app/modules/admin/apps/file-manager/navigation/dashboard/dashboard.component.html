<div class="row p-3">
  <div class="col-12 bg-card rounded-2xl shadow py-5">
    <mat-tab-group [animationDuration]="'0'" (selectedTabChange)="selectedTabValue($event)">
      <mat-tab label="Analytics">
        <ng-template matTabContent>
          <div class="col-12 bg-card rounded-2xl shadow mb-5 py-5">
            <mat-form-field appearance="fill" class="w-full">
              <mat-label>Go Back</mat-label>
              <mat-select [(ngModel)]="selectedYear"
                (selectionChange)="getDashboardGraphsData('historical_store_sales')">
                <mat-option *ngFor="let item of yearArray" value="{{ item }}">{{
                  item
                  }}</mat-option>
              </mat-select>
            </mat-form-field>
            <ngx-skeleton-loader *ngIf="isPageLoadingHistory" count="8" appearance="line" animation="pulse">
            </ngx-skeleton-loader>
            <apx-chart *ngIf="!isPageLoadingHistory" [series]="chartOptions.series" [chart]="chartOptions.chart"
              [xaxis]="chartOptions.xaxis" [yaxis]="chartOptions.yaxis" [markers]="markers"
              [colors]="chartOptions.colors" [grid]="chartOptions.grid" [stroke]="chartOptions.stroke"
              [title]="chartOptions.title"></apx-chart>
          </div>

          <div class="col-12 bg-card rounded-2xl shadow mb-5 py-5">
            <ngx-skeleton-loader *ngIf="isPageLoadingYTD" count="8" appearance="line" animation="pulse">
            </ngx-skeleton-loader>
            <apx-chart *ngIf="!isPageLoadingYTD" [series]="chartOptionsBar.series" [chart]="chartOptionsBar.chart"
              [xaxis]="chartOptionsBar.xaxis" [dataLabels]="chartOptionsBar.dataLabels" [yaxis]="chartOptionsBar.yaxis">
            </apx-chart>
          </div>

          <div class="col-12 bg-card rounded-2xl shadow mb-5 py-5">
            <div class="row">
              <div class="col-12" *ngIf="isPageLoadingSales">
                <ngx-skeleton-loader count="8" appearance="line" animation="pulse">
                </ngx-skeleton-loader>
              </div>
              <div class="col-md-6 col-12">
                <!-- <div class="text-center" *ngIf="isPageLoadingSales">
                <div class="spinner-border" role="status">
                  <span class="sr-only">Loading...</span>
                </div>
              </div> -->
                <apx-chart *ngIf="!isPageLoadingSales" [series]="chartOptionsOne.series" [chart]="chartOptionsOne.chart"
                  [xaxis]="chartOptionsOne.xaxis" [grid]="chartOptionsOne.grid" [stroke]="chartOptionsOne.stroke"
                  [title]="chartOptionsOne.title" [yaxis]="chartOptionsOne.yaxis"></apx-chart>
              </div>
              <div class="col-md-6 col-12">
                <apx-chart *ngIf="!isPageLoadingSales" [series]="chartOptionsTwo.series" [chart]="chartOptionsTwo.chart"
                  [xaxis]="chartOptionsTwo.xaxis" [dataLabels]="chartOptionsTwo.dataLabels"
                  [grid]="chartOptionsTwo.grid" [stroke]="chartOptionsTwo.stroke" [yaxis]="chartOptionsTwo.yaxis"
                  [title]="chartOptionsTwo.title"></apx-chart>
              </div>
              <div class="col-md-6 col-12">
                <apx-chart *ngIf="!isPageLoadingSales" [series]="chartOptionsThree.series"
                  [chart]="chartOptionsThree.chart" [xaxis]="chartOptionsThree.xaxis"
                  [dataLabels]="chartOptionsThree.dataLabels" [yaxis]="chartOptionsThree.yaxis"
                  [grid]="chartOptionsThree.grid" [stroke]="chartOptionsThree.stroke" [title]="chartOptionsThree.title">
                </apx-chart>
              </div>
            </div>
          </div>
        </ng-template>
      </mat-tab>
      <mat-tab label="Top Customers">
        <div class="py-5">
          <div class="p-6 sm:p-8 lg:p-6 w-full">
            <div class="text-2xl font-bold">Top Customers</div>
          </div>
          <ngx-skeleton-loader *ngIf="isPageLoadingCustomers" count="8" appearance="line" animation="pulse">
          </ngx-skeleton-loader>
          <div *ngIf="!isPageLoadingCustomers">
            <ng-container *ngIf="topCustomers.length > 0; else noRecords">
              <table mat-table [dataSource]="topCustomers" class="w-full">
                <!--- Note that these columns can be defined in any order.
                                  The actual rendered columns are set as a property on the row definition" -->
                <div class="color-blue">
                  <!-- SPID Column -->
                  <ng-container matColumnDef="cName">
                    <th class="bg-gray-50 dark:bg-black dark:bg-opacity-5" mat-header-cell *matHeaderCellDef>
                      Customer
                    </th>
                    <td mat-cell *matCellDef="let element">
                      <span class="text-sm">
                        {{ element.firstName + " " + element.lastName }}
                      </span>
                    </td>
                  </ng-container>

                  <!-- Name Column -->
                  <ng-container matColumnDef="Company">
                    <th class="bg-gray-50 dark:bg-black dark:bg-opacity-5" mat-header-cell *matHeaderCellDef>
                      Company
                    </th>
                    <td mat-cell *matCellDef="let element" class="text-sm">
                      {{ element.companyName }}
                    </td>
                  </ng-container>

                  <!-- Vendor Column -->
                  <ng-container matColumnDef="Total">
                    <th class="bg-gray-50 dark:bg-black dark:bg-opacity-5" mat-header-cell *matHeaderCellDef>
                      Total
                    </th>
                    <td mat-cell *matCellDef="let element" class="text-sm">
                      {{ element.total | currency: "USD" }}
                    </td>
                  </ng-container>

                  <!-- Master Column -->
                  <ng-container matColumnDef="Sales">
                    <th class="min-w-15 bg-gray-50 dark:bg-black dark:bg-opacity-5" mat-header-cell *matHeaderCellDef>
                      Sales
                    </th>
                    <td mat-cell *matCellDef="let element" class="text-sm">
                      {{ element.numSales }}
                    </td>
                  </ng-container>

                  <!-- Store Column -->
                  <ng-container matColumnDef="Percentage">
                    <th class="min-w-15 bg-gray-50 dark:bg-black dark:bg-opacity-5" mat-header-cell *matHeaderCellDef>
                      %
                    </th>
                    <td mat-cell *matCellDef="let element" class="text-sm">10%</td>
                  </ng-container>

                  <!-- Desc Column -->
                  <ng-container matColumnDef="Email">
                    <th class="bg-gray-50 dark:bg-black dark:bg-opacity-5" mat-header-cell *matHeaderCellDef>
                      Email
                    </th>
                    <td mat-cell *matCellDef="let element" class="text-sm">
                      {{ element.email }}
                    </td>
                  </ng-container>

                  <!-- Video Column -->
                  <ng-container matColumnDef="Phone">
                    <th class="bg-gray-50 dark:bg-black dark:bg-opacity-5" mat-header-cell *matHeaderCellDef>
                      Phone
                    </th>
                    <td mat-cell *matCellDef="let element" class="text-sm">
                      {{ element.dayPhone }}
                    </td>
                  </ng-container>
                </div>
                <tr mat-header-row class="h-16 shadow bg-card" *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row class="hover:bg-gray-100 dark:hover:bg-hover" style="cursor: pointer"
                  *matRowDef="let row; columns: displayedColumns"></tr>
              </table>
            </ng-container>
            <ng-template #noRecords>
              <div class="font-semibold tracking-tight text-center">
                <p>No record found</p>
                <p class="text-md cursor-pointer font-medium text-primary-500 hover:underline" (click)="resetSearch()">
                  Reset Search
                </p>
              </div>
            </ng-template>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>